<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>BirdZhang&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="BirdZhang&#039;s Blog"><meta name="msapplication-TileImage" content="/img/favicon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="BirdZhang&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="BirdZhang&amp;#39;s GitHub pages powered by Hexo.io and hexo-theme-material."><meta property="og:type" content="blog"><meta property="og:title" content="BirdZhang&#039;s Blog"><meta property="og:url" content="https://birdzhang.xyz/"><meta property="og:site_name" content="BirdZhang&#039;s Blog"><meta property="og:description" content="BirdZhang&amp;#39;s GitHub pages powered by Hexo.io and hexo-theme-material."><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://birdzhang.xyz/img/og_image.png"><meta property="article:author" content="BirdZhang"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://birdzhang.xyz"},"headline":"BirdZhang's Blog","image":["https://birdzhang.xyz/img/og_image.png"],"author":{"@type":"Person","name":"BirdZhang"},"publisher":{"@type":"Organization","name":"BirdZhang's Blog","logo":{"@type":"ImageObject","url":"https://birdzhang.xyz/images/avatar.jpg"}},"description":"BirdZhang&#39;s GitHub pages powered by Hexo.io and hexo-theme-material."}</script><link rel="alternate" href="/atom.xml" title="BirdZhang&#039;s Blog" type="application/atom+xml"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><script data-ad-client="ca-pub-8361678566464255" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><meta name="generator" content="Hexo 5.4.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/images/avatar.jpg" alt="BirdZhang&#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a><a class="navbar-item" href="/friends">Friends</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-12-08T09:57:35.000Z" title="2017/12/8 17:57:35">2017-12-08</time>发表</span><span class="level-item"><time dateTime="2025-07-29T01:33:42.456Z" title="2025/7/29 09:33:42">2025-07-29</time>更新</span><span class="level-item">3 分钟读完 (大约477个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/12/08/%E8%87%AA%E5%8A%A8%E6%B8%85%E7%90%86k8s%E4%B8%AD%E7%9A%84%E5%AE%B9%E5%99%A8_%E5%8D%B7_%E9%95%9C%E5%83%8F/">自动清理k8s中的容器、卷、镜像</a></h1><div class="content"><blockquote>
<p>镜像源码 <a target="_blank" rel="noopener" href="https://github.com/meltwater/docker-cleanup">https://github.com/meltwater/docker-cleanup</a></p>
</blockquote>
<h4 id="注意：这个镜像会将所有已经退出的容器、未使用的镜像和data-only的容器，除非你将他们加到保存的变量中。注意正确配置docker-api的版本，以免删除所有的镜像。小心挂载-var-lib-docker，因为如果挂载后没有使用的话，也会被当作未使用的卷删掉。"><a href="#注意：这个镜像会将所有已经退出的容器、未使用的镜像和data-only的容器，除非你将他们加到保存的变量中。注意正确配置docker-api的版本，以免删除所有的镜像。小心挂载-var-lib-docker，因为如果挂载后没有使用的话，也会被当作未使用的卷删掉。" class="headerlink" title="注意：这个镜像会将所有已经退出的容器、未使用的镜像和data-only的容器，除非你将他们加到保存的变量中。注意正确配置docker api的版本，以免删除所有的镜像。小心挂载 /var/lib/docker，因为如果挂载后没有使用的话，也会被当作未使用的卷删掉。"></a>注意：这个镜像会将所有已经退出的容器、未使用的镜像和data-only的容器，除非你将他们加到保存的变量中。注意正确配置docker api的版本，以免删除所有的镜像。小心挂载 /var/lib/docker，因为如果挂载后没有使用的话，也会被当作未使用的卷删掉。</h4><p>支持的变量</p>
<ul>
<li><strong>CLEAN_PERIOD=1800</strong> - Interval in seconds to sleep after completing a cleaning run. Defaults to 1800 seconds = 30 minutes.</li>
<li><strong>DELAY_TIME=1800</strong> - Seconds to wait before removing exited containers and unused images. Defaults to 1800 seconds = 30 minutes.</li>
<li><strong>KEEP_IMAGES</strong> - List of images to avoid cleaning, e.g. “ubuntu:trusty, ubuntu:latest”. Defaults to clean all unused images.</li>
<li><strong>KEEP_CONTAINERS</strong> - List of images for exited or dead containers to avoid cleaning, e.g. “ubuntu:trusty, ubuntu:latest”.</li>
<li><strong>KEEP_CONTAINERS_NAMED</strong> - List of names for exited or dead containers to avoid cleaning, e.g. “my-container1, persistent-data”.</li>
<li><strong>LOOP</strong> - Add the ability to do non-looped cleanups, run it once and exit. Options are true, false. Defaults to true to run it forever in loops.</li>
<li><strong>DEBUG</strong> - Set to 1 to enable more debugging output on pattern matches</li>
<li><strong>DOCKER_API_VERSION</strong> - The docker API version to use. This defaults to 1.20, but you can override it here in case the docker version on your host differs from the one that is installed in this container. You can find  - this on your host system by running <code>docker version --format '{{.Client.APIVersion}}'</code>.</li>
</ul>
<p>对于即使已经不运行了也不想清理的镜像，使用KEEP_IMAGES变量处理，此处我们添写： </p>
<p><code>vmware/harbor-*:*,*calico:*,*registry:*,*kubernetes-dashboard-amd64:*,*nginx-ingress-controller:*,*cvallance/mongo-k8s-sidecar:*</code></p>
<p>docker-cleanup-daemonset.yaml 配置如下：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: extensions/v1beta1</span><br><span class="line">kind: DaemonSet</span><br><span class="line">metadata:</span><br><span class="line">  labels:</span><br><span class="line">    name: clean-up</span><br><span class="line">  name: clean-up</span><br><span class="line">  namespace: kube-system</span><br><span class="line">spec:</span><br><span class="line">  updateStrategy:</span><br><span class="line">    type: &quot;RollingUpdate&quot;</span><br><span class="line">    rollingUpdate:</span><br><span class="line">      maxUnavailable: 1</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      labels:</span><br><span class="line">        app: clean-up</span><br><span class="line">    spec:</span><br><span class="line">      tolerations:</span><br><span class="line">        - key: &quot;LB&quot;</span><br><span class="line">          operator: &quot;Exists&quot;</span><br><span class="line">          effect: &quot;NoExecute&quot;</span><br><span class="line">      volumes:</span><br><span class="line">        - name: docker-sock</span><br><span class="line">          hostPath:</span><br><span class="line">            path: /var/run/docker.sock</span><br><span class="line">        - name: docker-directory</span><br><span class="line">          hostPath:</span><br><span class="line">            path: /data/kubernetes/docker</span><br><span class="line">      containers:</span><br><span class="line">        - image: meltwater/docker-cleanup:latest</span><br><span class="line">          name: clean-up</span><br><span class="line">          env:</span><br><span class="line">            - name: CLEAN_PERIOD</span><br><span class="line">              value: &quot;1800&quot;</span><br><span class="line">            - name: DELAY_TIME</span><br><span class="line">              value: &quot;60&quot;</span><br><span class="line">            - name: DOCKER_API_VERSION</span><br><span class="line">              value: &quot;1.29&quot;</span><br><span class="line">            - name: KEEP_IMAGES</span><br><span class="line">              value: &quot;vmware/harbor-*:*,*calico:*,*registry:*,*kubernetes-dashboard-amd64:*,*nginx-ingress-controller:*,*cvallance/mongo-k8s-sidecar:*&quot;</span><br><span class="line">          volumeMounts:</span><br><span class="line">            - mountPath: /var/run/docker.sock</span><br><span class="line">              name: docker-sock</span><br><span class="line">              readOnly: false</span><br><span class="line">            - mountPath: /var/lib/docker</span><br><span class="line">              name: docker-directory</span><br><span class="line">              readOnly: false</span><br></pre></td></tr></table></figure></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-12-08T09:49:25.000Z" title="2017/12/8 17:49:25">2017-12-08</time>发表</span><span class="level-item"><time dateTime="2025-07-29T01:33:42.450Z" title="2025/7/29 09:33:42">2025-07-29</time>更新</span><span class="level-item">6 分钟读完 (大约965个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/12/08/%E4%BD%BF%E7%94%A8DaemonSet-Taint-Tolerations-NodeSelector%E9%83%A8%E7%BD%B2Nginx-ingress-controller/">使用DaemonSet+Taint/Tolerations+NodeSelector部署Nginx ingress controller</a></h1><div class="content"><blockquote>
<p>使用DaemonSet+NodeSelector+Tolerations的方式定义Nginx Ingress Controller，给专门节点打上Label+Taint，使得这些专门节点只运行Nginx Ingress Controller，而不会调度和运行其他业务容器，只用来做代理节点。</p>
</blockquote>
<ul>
<li><p>在Kuberntes Cluster中准备N个节点，我们称之为代理节点。在这N个节点上只部署Nginx Ingress Controller（简称NIC）实例，不会跑其他业务容器。</p>
</li>
<li><p>给代理节点打上NoExecute Taint，防止业务容器调度或运行在这些节点。</p>
<p>  <code>kubectl taint nodes 10.8.8.234 LB=NIC:NoExecute</code></p>
</li>
<li><p>给代理节点打上Label，让NIC只部署在打了对应Lable的节点上。<br>  <code>kubectl label nodes 10.8.8.234 LB=NIC</code></p>
</li>
<li><p>修改calico-node配置，让calico可以在NoExecute节点上运行</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">    spec:</span><br><span class="line">    ...</span><br><span class="line">    spec:</span><br><span class="line">      tolerations:</span><br><span class="line">      - key: &quot;LB&quot;</span><br><span class="line">        operator: &quot;Exists&quot;</span><br><span class="line">        effect: &quot;NoExecute&quot;</span><br><span class="line">    ```    </span><br><span class="line"></span><br><span class="line">- 定义DaemonSet Yaml文件，注意加上Tolerations和Node Selector。(注意先创建serviceAccount、role等)    </span><br><span class="line">    </span><br></pre></td></tr></table></figure>
<p>  apiVersion: extensions/v1beta1<br>  kind: DaemonSet<br>  metadata:<br>  annotations:</p>
<pre><code>deployment.kubernetes.io/revision: &quot;4&quot;
</code></pre><p>  labels:</p>
<pre><code>k8s-app: nginx-ingress-controller
</code></pre><p>  name: nginx-ingress-controller<br>  namespace: kube-system<br>  spec:<br>  selector:</p>
<pre><code>matchLabels:
k8s-app: nginx-ingress-controller
</code></pre><p>  template:</p>
<pre><code>metadata:
annotations:
    prometheus.io/port: &quot;10254&quot;
    prometheus.io/scrape: &quot;true&quot;
creationTimestamp: null
labels:
    k8s-app: nginx-ingress-controller
spec:
# 加上对应的Node Selector
nodeSelector:
    LB: NIC
# 加上对应的Tolerations
tolerations:
- key: &quot;LB&quot;
    operator: &quot;Equal&quot;
    value: &quot;NIC&quot;
    effect: &quot;NoExecute&quot;
containers:
- args:
    - /nginx-ingress-controller
    - --default-backend-service=$(POD_NAMESPACE)/default-http-backend
    - --tcp-services-configmap=$(POD_NAMESPACE)/nginx-tcp-ingress-configmap
    - --configmap=$(POD_NAMESPACE)/nginx-configuration
    env:
    - name: POD_NAME
    valueFrom:
        fieldRef:
        apiVersion: v1
        fieldPath: metadata.name
    - name: POD_NAMESPACE
    valueFrom:
        fieldRef:
        apiVersion: v1
        fieldPath: metadata.namespace
    image: dceph02.rmz.flamingo-inc.com:8888/mynginx/nginx-ingress-controller:0.9.0-beta.11
    imagePullPolicy: IfNotPresent
    livenessProbe:
    failureThreshold: 3
    httpGet:
        path: /healthz
        port: 10254
        scheme: HTTP
    initialDelaySeconds: 10
    periodSeconds: 10
    successThreshold: 1
    timeoutSeconds: 1
    name: nginx-ingress-controller
    ports:
    - containerPort: 80
    hostPort: 80
    protocol: TCP
    - containerPort: 443
    hostPort: 443
    protocol: TCP
    readinessProbe:
    failureThreshold: 3
    httpGet:
        path: /healthz
        port: 10254
        scheme: HTTP
    periodSeconds: 10
    successThreshold: 1
    timeoutSeconds: 1
    resources: &#123;&#125;
hostNetwork: true
serviceAccount: ingress
serviceAccountName: ingress
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">    </span><br><span class="line">- 创建default backend服务</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</code></pre><p>  apiVersion: extensions/v1beta1<br>  kind: Deployment<br>  metadata:<br>  name: default-http-backend<br>  labels:</p>
<pre><code>k8s-app: default-http-backend
</code></pre><p>  namespace: kube-system<br>  spec:<br>  replicas: 1<br>  template:</p>
<pre><code>metadata:
labels:
    k8s-app: default-http-backend
spec:
terminationGracePeriodSeconds: 60
containers:
- name: default-http-backend
    # Any image is permissable as long as:
    # 1. It serves a 404 page at /
    # 2. It serves 200 on a /healthz endpoint
    image: gcr.io/google_containers/defaultbackend:1.0
    livenessProbe:
    httpGet:
        path: /healthz
        port: 8080
        scheme: HTTP
    initialDelaySeconds: 30
    timeoutSeconds: 5
    ports:
    - containerPort: 8080
    resources:
    limits:
        cpu: 10m
        memory: 20Mi
    requests:
        cpu: 10m
        memory: 20Mi
</code></pre><hr>
<p>  apiVersion: v1<br>  kind: Service<br>  metadata:<br>  name: default-http-backend<br>  namespace: kube-system<br>  labels:</p>
<pre><code>k8s-app: default-http-backend
</code></pre><p>  spec:<br>  ports:</p>
<ul>
<li>port: 80<br>  targetPort: 8080<br>selector:<br>  k8s-app: default-http-backend<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">根据default-backend.yaml创建对应的Deployment和Service。 `kubectl create -f default-backend.yaml`</span><br><span class="line"></span><br><span class="line">- 根据DaemonSet Yaml创建NIC DaemonSet，启动NIC。</span><br><span class="line"></span><br><span class="line">    `kubectl create -f nginx-ingress-daemonset.yaml`</span><br><span class="line"></span><br><span class="line">至此，NIC已经运行在代理节点上了，下面为测试内容。</span><br><span class="line"></span><br><span class="line">- (选择性)确认NIC启动成功后，创建测试用的服务。</span><br><span class="line"></span><br></pre></td></tr></table></figure>
kubectl run echoheaders –image=gcr.io/google_containers/echoserver:1.8 –replicas=1 –port=8080<br>kubectl expose deployment echoheaders –port=80 –target-port=8080 –name=echoheaders-x<br>kubectl expose deployment echoheaders –port=80 –target-port=8080 –name=echoheaders-y<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">创建测试用的Ingress Object</span><br><span class="line"></span><br></pre></td></tr></table></figure>
apiVersion: extensions/v1beta1<br>kind: Ingress<br>metadata:<br>name: echomap<br>namespace: default<br>spec:<br>rules:</li>
<li>host: foo.bar.com<br>  http:<br>  paths:<ul>
<li>backend:<br>  serviceName: echoheaders-x<br>  servicePort: 80<br>  path: /foo</li>
</ul>
</li>
<li>host: bar.baz.com<br>  http:<br>  paths:<ul>
<li>backend:<br>  serviceName: echoheaders-y<br>  servicePort: 80<br>  path: /bar</li>
<li>backend:<br>  serviceName: echoheaders-x<br>  servicePort: 80<br>  path: /foo<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- (选择性)查看ingress的代理地址</span><br><span class="line"></span><br></pre></td></tr></table></figure>
[root@host ~]# kubectl describe ing echomap<br>Name:                   echomap<br>Namespace:              default<br>Address:                10.8.8.234<br>Default backend:        default-http-backend:80 (172.254.109.193:8080)<br>Rules:<br>Host          Path    Backends</li>
</ul>
</li>
</ul>
<hr>
<p>  foo.bar.com</p>
<pre><code>/foo    echoheaders-x:80 (&lt;none&gt;)
</code></pre><p>  bar.baz.com</p>
<pre><code>/bar    echoheaders-y:80 (&lt;none&gt;)
/foo    echoheaders-x:80 (&lt;none&gt;)
</code></pre><p>  Annotations:<br>  Events:<br>  FirstSeen     LastSeen        Count   From                    SubObjectPath   Type            Reason  Message</p>
<hr>
<p>  35m           35m             1       ingress-controller                      Normal          CREATE  Ingress default/echomap<br>  35m           35m             1       ingress-controller                      Normal          UPDATE  Ingress default/echomap</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 测试</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>  [root@host ~]# curl 10.8.8.234/foo -H ‘Host: foo.bar.com’</p>
<p>  Hostname: echoheaders-1076692255-p1ndv<br>  Pod Information:</p>
<pre><code>-no pod information available-
</code></pre><p>  Server values:</p>
<pre><code>server_version=nginx: 1.13.3 - lua: 10008
</code></pre><p>  Request Information:</p>
<pre><code>client_address=172.254.246.192
method=GET
real path=/foo
query=
request_version=1.1
request_uri=http://foo.bar.com:8080/foo
</code></pre><p>  Request Headers:</p>
<pre><code>accept=*/*
connection=close
host=foo.bar.com
user-agent=curl/7.29.0
x-forwarded-for=10.8.8.234
x-forwarded-host=foo.bar.com
x-forwarded-port=80
x-forwarded-proto=http
x-original-uri=/foo
x-real-ip=10.8.8.234
x-scheme=http
</code></pre><p>  Request Body:</p>
<pre><code>-no body in request-
</code></pre><p>  [root@dceph04 ~]# curl 10.8.8.234/foo -H ‘Host: bar.baz.com’</p>
<p>  Hostname: echoheaders-1076692255-p1ndv<br>  Pod Information:</p>
<pre><code>-no pod information available-
</code></pre><p>  Server values:</p>
<pre><code>server_version=nginx: 1.13.3 - lua: 10008
</code></pre><p>  Request Information:</p>
<pre><code>client_address=172.254.246.192
method=GET
real path=/foo
query=
request_version=1.1
request_uri=http://bar.baz.com:8080/foo
</code></pre><p>  Request Headers:</p>
<pre><code>accept=*/*
connection=close
host=bar.baz.com
user-agent=curl/7.29.0
x-forwarded-for=10.8.8.234
x-forwarded-host=bar.baz.com
x-forwarded-port=80
x-forwarded-proto=http
x-original-uri=/foo
x-real-ip=10.8.8.234
x-scheme=http
</code></pre><p>  Request Body:</p>
<pre><code>-no body in request-
</code></pre><p>  <code>`</code></p>
</li>
</ul>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><pre><code>https://my.oschina.net/jxcdwangtao/blog/1523812                
</code></pre></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-08-21T10:26:45.000Z" title="2017/8/21 18:26:45">2017-08-21</time>发表</span><span class="level-item"><time dateTime="2025-07-29T01:33:42.441Z" title="2025/7/29 09:33:42">2025-07-29</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Java/">Java</a><span> / </span><a class="link-muted" href="/categories/Java/Python/">Python</a></span><span class="level-item">1 分钟读完 (大约185个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/08/21/Java%E4%B8%8EPython%E5%AE%89%E5%85%A8%E8%BD%AC%E7%A0%81%E9%93%BE%E6%8E%A5/">Java与Python安全转码链接</a></h1><div class="content"><h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">String OriginUrl = &quot;https://meijumao.cn/yunparse/index.php?url=//美剧/周一/GOT权游/S07/Online/02按时发达的十分.mp4~bdyun&quot;;</span><br><span class="line">URL repoUrl = new URL(OriginUrl);</span><br><span class="line">URI uri;</span><br><span class="line">try &#123;</span><br><span class="line">    uri = new URI(repoUrl.getProtocol(), repoUrl.getUserInfo(), repoUrl.getHost(), repoUrl.getPort(), repoUrl.getPath(), repoUrl.getQuery(), repoUrl.getRef());</span><br><span class="line">    System.out.println(uri.toASCIIString());</span><br><span class="line">&#125; catch (URISyntaxException e) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h3><p>python3:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import string</span><br><span class="line">import urllib.parse</span><br><span class="line"></span><br><span class="line">url = &quot;https://meijumao.cn/yunparse/index.php?url=//美剧/周一/GOT权游/S07/Online/02按时发达的十分.mp4~bdyun&quot;</span><br><span class="line">print(urllib.parse.quote(url,safe=string.printable))</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>python2:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import string</span><br><span class="line">from urllib import quote</span><br><span class="line"></span><br><span class="line">url = &quot;https://meijumao.cn/yunparse/index.php?url=//美剧/周一/GOT权游/S07/Online/02按时发达的十分.mp4~bdyun&quot;</span><br><span class="line">print urllib.parse.quote(url,safe=string.printable)</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>结果 <code>&#39;https://meijumao.cn/yunparse/index.php?url=//%E7%BE%8E%E5%89%A7/%E5%91%A8%E4%B8%80/GOT%E6%9D%83%E6%B8%B8/S07/Online/02%E6%8C%89%E6%97%B6%E5%8F%91%E8%BE%BE%E7%9A%84%E5%8D%81%E5%88%86.mp4~bdyun</code></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-06-02T09:57:21.000Z" title="2017/6/2 17:57:21">2017-06-02</time>发表</span><span class="level-item"><time dateTime="2025-07-29T01:33:42.440Z" title="2025/7/29 09:33:42">2025-07-29</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Java/">Java</a></span><span class="level-item">几秒读完 (大约55个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/06/02/Java-%E8%A7%A3%E6%9E%90json%E6%95%B0%E7%BB%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%BAJava%E5%AF%B9%E8%B1%A1/">Java 解析json数组字符串为Java对象</a></h1><div class="content"><p>套用罗锤子的话：这可能是最方便快捷的方式了</p>
<p>json字符串：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[&#123; &quot;number&quot; : &quot;3&quot;,</span><br><span class="line">  &quot;title&quot; : &quot;hello_world&quot;  </span><br><span class="line">&#125;,</span><br><span class="line">&#123; &quot;number&quot; : &quot;2&quot;,</span><br><span class="line">  &quot;title&quot; : &quot;hello_world&quot;  </span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure></p>
<p>Java代码：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class Wrapper&#123;</span><br><span class="line">    int number;</span><br><span class="line">    String title;       </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Gson gson = new Gson();</span><br><span class="line">Wrapper[] data = gson.fromJson(idcstring, Wrapper[].class);</span><br></pre></td></tr></table></figure></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-05-31T03:46:07.000Z" title="2017/5/31 11:46:07">2017-05-31</time>发表</span><span class="level-item"><time dateTime="2025-07-29T01:33:42.445Z" title="2025/7/29 09:33:42">2025-07-29</time>更新</span><span class="level-item">几秒读完 (大约33个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/05/31/awk-%E8%AE%A1%E7%AE%97%E4%B8%80%E5%88%97%E7%9A%84%E5%92%8C/">awk 计算一列的和</a></h1><div class="content"><p><code>awk &#39;&#123;sum += $10&#125;;END &#123;print sum&#125;&#39;</code></p>
<p>例如想计算nginx日志中206下载总数据和，则用<br><code>cat xxx.access.log|grep &quot; 206 &quot; |awk &#39;&#123;sum += $10&#125;;END &#123;print sum&#125;&#39;</code></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-05-27T09:54:08.000Z" title="2017/5/27 17:54:08">2017-05-27</time>发表</span><span class="level-item"><time dateTime="2025-07-29T01:33:42.443Z" title="2025/7/29 09:33:42">2025-07-29</time>更新</span><span class="level-item">1 分钟读完 (大约143个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/05/27/Python%E4%B8%80%E4%BA%9B%E6%A8%A1%E5%9D%97%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95%E8%AE%B0%E5%BD%95/">Python一些模块安装方法记录</a></h1><div class="content"><p>首先需要安装pip模块，如果yum中没有，则需要用 <a href="/files/get-pip.py">get-pip.py</a>安装</p>
<p><code>sudo python get-pip.py</code> 安装</p>
<h3 id="web-py"><a href="#web-py" class="headerlink" title="web.py"></a>web.py</h3><p><code>sudo pip install web.py</code></p>
<h3 id="mysql-connector"><a href="#mysql-connector" class="headerlink" title="mysql.connector"></a>mysql.connector</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget http://cdn.mysql.com/Downloads/Connector-Python/mysql-connector-python-1.0.11.zip </span><br><span class="line">unzip mysql-connector-python-1.0.11.zip </span><br><span class="line">cd mysql-connector-python-1.0.11  </span><br><span class="line">sudo python setup.py install </span><br></pre></td></tr></table></figure>
<h3 id="pytds（连接mssql）"><a href="#pytds（连接mssql）" class="headerlink" title="pytds（连接mssql）"></a>pytds（连接mssql）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install python-tds</span><br><span class="line">#sudo pip install bitarray</span><br></pre></td></tr></table></figure>
<h3 id="anjuke-中文转拼音"><a href="#anjuke-中文转拼音" class="headerlink" title="anjuke(中文转拼音)"></a>anjuke(中文转拼音)</h3><p><code>sudo pip install pinyin4py</code></p>
<h3 id="Python2-7安装"><a href="#Python2-7安装" class="headerlink" title="Python2.7安装"></a>Python2.7安装</h3><p>这样安装之后不会与之前的python2.6版本有冲突，3.x版本同理</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.python.org/ftp/python/2.7.8/Python-2.7.8.tgz</span><br><span class="line">tar xf Python-2.7.8.tgz</span><br><span class="line">cd Python-2.7.8</span><br><span class="line">./configure --prefix=/usr/local</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-05-26T08:01:48.000Z" title="2017/5/26 16:01:48">2017-05-26</time>发表</span><span class="level-item"><time dateTime="2025-07-29T01:33:42.454Z" title="2025/7/29 09:33:42">2025-07-29</time>更新</span><span class="level-item">1 分钟读完 (大约129个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/05/26/%E5%AE%89%E8%A3%85RemixOS%E5%88%B0PC/">安装RemixOS到PC</a></h1><div class="content"><h1 id="！一定要用UEFI方式启动，前提是64位的"><a href="#！一定要用UEFI方式启动，前提是64位的" class="headerlink" title="！一定要用UEFI方式启动，前提是64位的"></a>！一定要用UEFI方式启动，前提是64位的</h1><h2 id="下载镜像"><a href="#下载镜像" class="headerlink" title="下载镜像"></a>下载镜像</h2><p><a target="_blank" rel="noopener" href="https://www.fosshub.com/Remix-OS.html">https://www.fosshub.com/Remix-OS.html</a></p>
<h2 id="刻录到U盘"><a href="#刻录到U盘" class="headerlink" title="刻录到U盘"></a>刻录到U盘</h2><p>解压之后有一个iso文件一个exe文件，推荐用ultraiso安装（用那个exe会把U盘分成三个区。。。有病吗？）</p>
<h2 id="修改参数"><a href="#修改参数" class="headerlink" title="修改参数"></a>修改参数</h2><p>U盘开机启动之后，选择”Resident/Guest mode”，按TAB键或e键，在命令最后添加”INSTALL=2”，删掉”USB_DATA_PARTITION=1”</p>
<p>接下来系统会安装到硬盘上。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-05-24T09:28:04.000Z" title="2017/5/24 17:28:04">2017-05-24</time>发表</span><span class="level-item"><time dateTime="2025-07-29T01:33:42.456Z" title="2025/7/29 09:33:42">2025-07-29</time>更新</span><span class="level-item">几秒读完 (大约9个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/05/24/%E9%9A%8F%E7%AC%94/">随笔</a></h1><div class="content"><p>我只是占个tag坑…😂</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-05-24T09:22:42.000Z" title="2017/5/24 17:22:42">2017-05-24</time>发表</span><span class="level-item"><time dateTime="2025-07-29T01:33:42.455Z" title="2025/7/29 09:33:42">2025-07-29</time>更新</span><span class="level-item">1 分钟读完 (大约221个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/05/24/%E7%94%A8Python%E6%8A%93%E5%8F%96%E7%8E%8B%E5%9E%A0%E7%9A%84%E5%8D%9A%E5%AE%A2/">用Python抓取王垠的博客</a></h1><div class="content"><h2 id="直接上代码（由于他博客是异步的，所以我们要用mechanize）"><a href="#直接上代码（由于他博客是异步的，所以我们要用mechanize）" class="headerlink" title="直接上代码（由于他博客是异步的，所以我们要用mechanize）"></a>直接上代码（<del>由于他博客是异步的，所以我们要用mechanize</del>）</h2><pre><code>#!/usr/bin/env python
# -*- coding: utf-8 -*-
&apos;&apos;&apos;
Created on 2017年5月24日

@author: BirdZhang
&apos;&apos;&apos;
from bs4 import BeautifulSoup
import mechanize
import cookielib
from wyblog import BLOG_URL

class NoHistory(object): 
    def add(self, *a, **k): pass 
    def clear(self): pass 

def getBrowers():
    br = mechanize.Browser(history=NoHistory())
    #options
    br.set_handle_equiv(True)
    #br.set_handle_gzip(True)
    br.set_handle_redirect(True)
    br.set_handle_referer(True)
    br.set_handle_robots(False)
    cj = cookielib.LWPCookieJar()  
    br.set_cookiejar(cj)##关联cookies  
    br.set_handle_refresh(mechanize._http.HTTPRefreshProcessor(), max_time=1)
    br.set_debug_http(False)
    br.set_debug_redirects(False)
    br.set_debug_responses(False)
    br.addheaders = [(&quot;User-agent&quot;,&quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36&quot;)]
    return br


if __name__ == &quot;__main__&quot;:
    br = getBrowers()
    r = br.open(BLOG_URL)
    html = r.read()
#     print html
    soup = BeautifulSoup(html,&quot;html5lib&quot;)
    lis = soup.find_all(name=&apos;li&apos;,attrs=&#123;
                                               &quot;class&quot;:&quot;list-group-item title&quot;
                                               &#125;)
    for i in lis:
        print i.a[&quot;href&quot;],&quot; &quot;.join(i.a.contents)
</code></pre><p>剩下的自己该干嘛干嘛吧</p>
<h3 id="后面干脆撸了一个旗鱼的客户端"><a href="#后面干脆撸了一个旗鱼的客户端" class="headerlink" title="后面干脆撸了一个旗鱼的客户端"></a>后面干脆撸了一个旗鱼的客户端</h3><p><a target="_blank" rel="noopener" href="https://github.com/0312birdzhang/harbour-blogofwy">https://github.com/0312birdzhang/harbour-blogofwy</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-05-22T08:32:54.000Z" title="2017/5/22 16:32:54">2017-05-22</time>发表</span><span class="level-item"><time dateTime="2025-07-29T01:33:42.454Z" title="2025/7/29 09:33:42">2025-07-29</time>更新</span><span class="level-item">几秒读完 (大约102个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/05/22/%E6%9C%80%E9%9D%A0%E8%B0%B1%E7%9A%84Tomcat%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2%E6%95%99%E7%A8%8B/">最靠谱的Tomcat日志切割教程</a></h1><div class="content"><h2 id="强大的logrotate"><a href="#强大的logrotate" class="headerlink" title="强大的logrotate"></a>强大的logrotate</h2><p>更多logrotate的说明见 <a target="_blank" rel="noopener" href="http://www.linuxcommand.org/man_pages/logrotate8.html">http://www.linuxcommand.org/man_pages/logrotate8.html</a></p>
<p>或者这里 <a target="_blank" rel="noopener" href="https://linux.cn/article-4126-1.html">https://linux.cn/article-4126-1.html</a></p>
<p>在<code>/etc/logrotate.d/tomcat</code>里写入下面的内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/data/logs/logpath/catalina-daemon.out &#123;</span><br><span class="line">        daily</span><br><span class="line">        rotate 3</span><br><span class="line">        size 100M</span><br><span class="line">        nocompress</span><br><span class="line">        notifempty</span><br><span class="line">        missingok</span><br><span class="line">        copytruncate</span><br><span class="line">        create 0600 root root</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试</p>
<p><code>logrotate --force /etc/logrotate.d/tomcat.conf</code></p>
<p>查看是否有一个/data/logs/logpath/catalina-daemon.out.1生成</p>
<h2 id="为什么不用cronolog"><a href="#为什么不用cronolog" class="headerlink" title="为什么不用cronolog?"></a>为什么不用cronolog?</h2><p>很简单，cronolog对jsvc启动的tomcat不友好</p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/3/">上一页</a></div><div class="pagination-next"><a href="/page/5/">下一页</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><a class="pagination-link" href="/page/2/">2</a></li><li><a class="pagination-link" href="/page/3/">3</a></li><li><a class="pagination-link is-current" href="/page/4/">4</a></li><li><a class="pagination-link" href="/page/5/">5</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://www.gravatar.com/avatar/72326950ba674fec08b31a0c90663fe2?s=128" alt="BirdZhang"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">BirdZhang</p><p class="is-size-6 is-block">一只早起的懒鸟</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Earth</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">42</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">72</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/0312birdzhang" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/0312birdzhang"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/0312birdzhang"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Irc/"><span class="level-start"><span class="level-item">Irc</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Java/"><span class="level-start"><span class="level-item">Java</span></span><span class="level-end"><span class="level-item tag">3</span></span></a><ul><li><a class="level is-mobile" href="/categories/Java/Python/"><span class="level-start"><span class="level-item">Python</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Java/Tomcat/"><span class="level-start"><span class="level-item">Tomcat</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Nginx/"><span class="level-start"><span class="level-item">Nginx</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/SailfishOS/"><span class="level-start"><span class="level-item">SailfishOS</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul><li><a class="level is-mobile" href="/categories/SailfishOS/Docker/"><span class="level-start"><span class="level-item">Docker</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-07-27T03:19:48.000Z">2025-07-27</time></p><p class="title"><a href="/2025/07/27/%E5%9C%A8%E5%B0%8F%E7%B1%B3%E5%B9%B3%E6%9D%BF5%E4%B8%8A%E8%BF%90%E8%A1%8Copenpilot/">在小米平板5上运行openpilot</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-04-14T08:31:55.000Z">2024-04-14</time></p><p class="title"><a href="/2024/04/14/%E5%A6%82%E4%BD%95%E5%9C%A8rk3588%E4%B8%8A%E8%BF%90%E8%A1%8Copenpilot-1/">如何在rk3588上运行openpilot[1]</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-10-18T02:56:52.000Z">2023-10-18</time></p><p class="title"><a href="/2023/10/18/okcaros%E7%A7%BB%E6%A4%8D%E5%88%B0%E7%BA%A2%E7%B1%B3note8%E5%8F%8A%E4%BD%93%E9%AA%8C/">okcaros移植到红米note8及体验</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-10-18T02:04:37.000Z">2023-10-18</time></p><p class="title"><a href="/2023/10/18/%E5%85%B3%E4%BA%8E%E9%A6%99%E6%A9%99%E6%B4%BE5%E8%BF%90%E8%A1%8Cflowpilot/">关于香橙派5运行flowpilot</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-12-08T02:14:46.000Z">2022-12-08</time></p><p class="title"><a href="/2022/12/08/%E8%AE%B0%E5%BD%95%E4%B8%80%E6%AC%A1Signal%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%90%86%E7%9A%84%E8%BF%87%E7%A8%8B/">记录一次Signal使用代理的过程</a></p></div></article></div></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label">广告</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-8361678566464255" data-ad-slot="7814234312" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2025/07/"><span class="level-start"><span class="level-item">七月 2025</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/04/"><span class="level-start"><span class="level-item">四月 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/10/"><span class="level-start"><span class="level-item">十月 2023</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/12/"><span class="level-start"><span class="level-item">十二月 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/03/"><span class="level-start"><span class="level-item">三月 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/05/"><span class="level-start"><span class="level-item">五月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/04/"><span class="level-start"><span class="level-item">四月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/11/"><span class="level-start"><span class="level-item">十一月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/08/"><span class="level-start"><span class="level-item">八月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/06/"><span class="level-start"><span class="level-item">六月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">十二月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/10/"><span class="level-start"><span class="level-item">十月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/06/"><span class="level-start"><span class="level-item">六月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/05/"><span class="level-start"><span class="level-item">五月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/04/"><span class="level-start"><span class="level-item">四月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/12/"><span class="level-start"><span class="level-item">十二月 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/09/"><span class="level-start"><span class="level-item">九月 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/08/"><span class="level-start"><span class="level-item">八月 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/07/"><span class="level-start"><span class="level-item">七月 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/06/"><span class="level-start"><span class="level-item">六月 2018</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/05/"><span class="level-start"><span class="level-item">五月 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/03/"><span class="level-start"><span class="level-item">三月 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/01/"><span class="level-start"><span class="level-item">一月 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/12/"><span class="level-start"><span class="level-item">十二月 2017</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/08/"><span class="level-start"><span class="level-item">八月 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/06/"><span class="level-start"><span class="level-item">六月 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/05/"><span class="level-start"><span class="level-item">五月 2017</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/9t/"><span class="tag">9t</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Java/"><span class="tag">Java</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Terminating/"><span class="tag">Terminating</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Tomcat/"><span class="tag">Tomcat</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/android/"><span class="tag">android</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/apt/"><span class="tag">apt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cas/"><span class="tag">cas</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/coinhive/"><span class="tag">coinhive</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/crt/"><span class="tag">crt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/davinci/"><span class="tag">davinci</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/debian/"><span class="tag">debian</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker/"><span class="tag">docker</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/drbd/"><span class="tag">drbd</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/frp/"><span class="tag">frp</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/gitlab/"><span class="tag">gitlab</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hadk/"><span class="tag">hadk</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/https/"><span class="tag">https</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/httpservletrequest/"><span class="tag">httpservletrequest</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hybris-15-1/"><span class="tag">hybris-15.1</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hybris-16-0/"><span class="tag">hybris-16.0</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ios/"><span class="tag">ios</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ip/"><span class="tag">ip</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/iphone/"><span class="tag">iphone</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/irc/"><span class="tag">irc</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java/"><span class="tag">java</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jolla/"><span class="tag">jolla</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/js/"><span class="tag">js</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/json/"><span class="tag">json</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/k20/"><span class="tag">k20</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/k8s/"><span class="tag">k8s</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kubernetes/"><span class="tag">kubernetes</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/lineage-15-1/"><span class="tag">lineage-15.1</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/lineage-16-0/"><span class="tag">lineage-16.0</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linux/"><span class="tag">linux</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/lua/"><span class="tag">lua</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/migrate/"><span class="tag">migrate</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nginx/"><span class="tag">nginx</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/okcaros/"><span class="tag">okcaros</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/openpilot/"><span class="tag">openpilot</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/openresty/"><span class="tag">openresty</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/opensips/"><span class="tag">opensips</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pastebin/"><span class="tag">pastebin</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python/"><span class="tag">python</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python2/"><span class="tag">python2</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/rdp/"><span class="tag">rdp</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/redmi/"><span class="tag">redmi</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/redmi5plus/"><span class="tag">redmi5plus</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/remix/"><span class="tag">remix</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/rk3588/"><span class="tag">rk3588</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sailfish/"><span class="tag">sailfish</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sailfishos/"><span class="tag">sailfishos</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/signal/"><span class="tag">signal</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sip/"><span class="tag">sip</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/socks5/"><span class="tag">socks5</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/subprocess/"><span class="tag">subprocess</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tomcat/"><span class="tag">tomcat</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/trustcacerts/"><span class="tag">trustcacerts</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ubuntu/"><span class="tag">ubuntu</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/unix/"><span class="tag">unix</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vince/"><span class="tag">vince</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vmvare/"><span class="tag">vmvare</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/voip/"><span class="tag">voip</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/windows/"><span class="tag">windows</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/x86/"><span class="tag">x86</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/xiaomi/"><span class="tag">xiaomi</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/yavijava/"><span class="tag">yavijava</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8F%82%E6%95%B0/"><span class="tag">参数</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%94%B9%E5%86%99/"><span class="tag">改写</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%B7%B3%E8%BF%87/"><span class="tag">跳过</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%BF%81%E7%A7%BB/"><span class="tag">迁移</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%9A%8F%E7%AC%94/"><span class="tag">随笔</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/images/avatar.jpg" alt="BirdZhang&#039;s Blog" height="28"></a><p class="is-size-7"><span>&copy; 2025 BirdZhang</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>