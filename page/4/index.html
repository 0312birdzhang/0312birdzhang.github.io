<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>BirdZhang&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="BirdZhang&#039;s Blog"><meta name="msapplication-TileImage" content="/img/favicon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="BirdZhang&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="BirdZhang&amp;#39;s GitHub pages powered by Hexo.io and hexo-theme-material."><meta property="og:type" content="blog"><meta property="og:title" content="BirdZhang&#039;s Blog"><meta property="og:url" content="https://birdzhang.xyz/"><meta property="og:site_name" content="BirdZhang&#039;s Blog"><meta property="og:description" content="BirdZhang&amp;#39;s GitHub pages powered by Hexo.io and hexo-theme-material."><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://birdzhang.xyz/img/og_image.png"><meta property="article:author" content="BirdZhang"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://birdzhang.xyz"},"headline":"BirdZhang's Blog","image":["https://birdzhang.xyz/img/og_image.png"],"author":{"@type":"Person","name":"BirdZhang"},"publisher":{"@type":"Organization","name":"BirdZhang's Blog","logo":{"@type":"ImageObject","url":"https://birdzhang.xyz/images/avatar.jpg"}},"description":"BirdZhang&#39;s GitHub pages powered by Hexo.io and hexo-theme-material."}</script><link rel="alternate" href="/atom.xml" title="BirdZhang&#039;s Blog" type="application/atom+xml"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><script data-ad-client="ca-pub-8361678566464255" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><meta name="generator" content="Hexo 5.4.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/images/avatar.jpg" alt="BirdZhang&#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a><a class="navbar-item" href="/friends">Friends</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2018-03-30T06:28:28.000Z" title="2018/3/30 14:28:28">2018-03-30</time>发表</span><span class="level-item"><time dateTime="2025-07-29T01:33:42.443Z" title="2025/7/29 09:33:42">2025-07-29</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/SailfishOS/">SailfishOS</a></span><span class="level-item">11 分钟读完 (大约1668个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/03/30/SailfishOS%E7%A7%BB%E6%A4%8D%E5%88%B0Redmi-5-Plus%E7%9A%84%E4%B8%80%E4%BA%9B%E8%AE%B0%E5%BD%95/">SailfishOS移植到Redmi 5 Plus的一些记录</a></h1><div class="content"><h1 id="移植旗鱼系统到红米5p的过程记录"><a href="#移植旗鱼系统到红米5p的过程记录" class="headerlink" title="移植旗鱼系统到红米5p的过程记录"></a>移植旗鱼系统到红米5p的过程记录</h1><h2 id="可以去ホロ-🐺的博客看看更详细的"><a href="#可以去ホロ-🐺的博客看看更详细的" class="headerlink" title="!!!可以去ホロ 🐺的博客看看更详细的!!!"></a>!!!可以去ホロ 🐺的博客看看更详细的!!!</h2><p>  <a target="_blank" rel="noopener" href="https://blog.yoitsu.moe/category/sailfish.html">https://blog.yoitsu.moe/category/sailfish.html</a></p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ul>
<li>一台红米5p手机，解锁过并且刷了lineageos</li>
<li>有梯子</li>
<li>一台内存起码8G的电脑(4G也可以)，Ubuntu 系统，硬盘起码40GB大小，或者更高。</li>
<li><a target="_blank" rel="noopener" href="https://sailfishos.org/develop/hadk/">SailfishOS-HardwareAdaptationDevelopmentKit</a> 1 READ部分pdf文档</li>
<li><del><a target="_blank" rel="noopener" href="https://wiki.merproject.org/wiki/Adaptations/faq-hadk">https://wiki.merproject.org/wiki/Adaptations/faq-hadk</a></del> <a target="_blank" rel="noopener" href="https://github.com/mer-hybris/hadk-faq">https://github.com/mer-hybris/hadk-faq</a> （2019-10-28更新）</li>
<li>最关键的，一颗善于折腾的心和善于搜索的你</li>
<li>irc日志 <a target="_blank" rel="noopener" href="https://irclogs.sailfishos.org/logs/%23sailfishos-porters/">https://irclogs.sailfishos.org/logs/%23sailfishos-porters/</a> </li>
</ul>
<h2 id="搭建环境"><a href="#搭建环境" class="headerlink" title="搭建环境"></a>搭建环境</h2><h3 id="Android编译环境-HADK-第4章"><a href="#Android编译环境-HADK-第4章" class="headerlink" title="Android编译环境(HADK 第4章)"></a>Android编译环境(HADK 第4章)</h3><blockquote>
<p>需要先配置一下hadk的环境变量，一共三个文件，可以参考这里： <a target="_blank" rel="noopener" href="https://github.com/CancroSailors/sailfish-build-environment">https://github.com/CancroSailors/sailfish-build-environment</a></p>
</blockquote>
<p>然后<code>source ~/.hadk.env</code>一下</p>
<h4 id="1-安装git等"><a href="#1-安装git等" class="headerlink" title="1. 安装git等"></a>1. 安装git等</h4><p><code>sudo apt-get install git</code></p>
<h4 id="2-同步CM的代码"><a href="#2-同步CM的代码" class="headerlink" title="2. 同步CM的代码"></a>2. 同步CM的代码</h4><h5 id="配置git的用户名跟邮箱，填自己的就行，随便填也行"><a href="#配置git的用户名跟邮箱，填自己的就行，随便填也行" class="headerlink" title="配置git的用户名跟邮箱，填自己的就行，随便填也行"></a>配置git的用户名跟邮箱，填自己的就行，随便填也行</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;Your Name&quot;</span><br><span class="line">git config --global user.email &quot;you@example.com&quot;</span><br></pre></td></tr></table></figure>
<h5 id="创建检出代码的目录，所在的盘空间要足够"><a href="#创建检出代码的目录，所在的盘空间要足够" class="headerlink" title="创建检出代码的目录，所在的盘空间要足够"></a>创建检出代码的目录，所在的盘空间要足够</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p $ANDROID_ROOT</span><br><span class="line">sudo chown -R $USER $ANDROID_ROOT</span><br><span class="line">cd $ANDROID_ROOT</span><br><span class="line">repo init -u git://github.com/mer-hybris/android.git -b hybris-14.1</span><br></pre></td></tr></table></figure>
<h5 id="配置你的设备的仓库，这里是vince"><a href="#配置你的设备的仓库，这里是vince" class="headerlink" title="配置你的设备的仓库，这里是vince"></a>配置你的设备的仓库，这里是vince</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mkdir $ANDROID_ROOT/.repo/local_manifests</span><br><span class="line">cat &lt;&lt;&#x27;EOF&#x27; &gt;&gt; $ANDROID_ROOT/.repo/local_manifests/vince.xml</span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;manifest&gt;</span><br><span class="line">  &lt;project path=&quot;device/xiaomi/vince&quot; name=&quot;Sailfish-On-Vince/device_xiaomi_vince&quot; revision=&quot;cm-14.1&quot; /&gt;</span><br><span class="line">  &lt;project path=&quot;vendor/xiaomi/vince&quot; name=&quot;Sailfish-On-Vince/vendor_xiaomi_vince&quot; revision=&quot;cm-14.1&quot; /&gt;</span><br><span class="line">  &lt;project path=&quot;kernel/xiaomi/vince&quot; name=&quot;Sailfish-On-Vince/kernel_xiaomi_msm8953&quot; revision=&quot;cm-14.1&quot; /&gt;</span><br><span class="line">  &lt;project path=&quot;hybris/droid-hal-version-vince&quot; name=&quot;Sailfish-On-Vince/droid-hal-version-vince&quot; revision=&quot;master&quot; /&gt;</span><br><span class="line">  &lt;project path=&quot;hybris/droid-config-vince&quot; name=&quot;Sailfish-On-Vince/droid-config-vince&quot; revision=&quot;master&quot; /&gt;</span><br><span class="line">  &lt;project path=&quot;rpm&quot; name=&quot;Sailfish-On-Vince/droid-hal-vince&quot; revision=&quot;master&quot; /&gt;</span><br><span class="line">&lt;/manifest&gt;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<h5 id="同步代码"><a href="#同步代码" class="headerlink" title="同步代码"></a>同步代码</h5><p><code>repo sync --fetch-submodules</code></p>
<p>如果你要求快，可以用 <code>repo sync --fetch-submodules -c --no-tags --no-clone-bundle</code>，这样只会拉取当前要用的代码，但是不方便后面的修改提交</p>
<p>出错就多同步几次</p>
<h3 id="Mer编译环境"><a href="#Mer编译环境" class="headerlink" title="Mer编译环境"></a>Mer编译环境</h3><blockquote>
<p>参见官方教程： <a target="_blank" rel="noopener" href="https://sailfishos.org/wiki/Platform_SDK_Installation">https://sailfishos.org/wiki/Platform_SDK_Installation</a></p>
</blockquote>
<p>安装Platform SDK</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">export PLATFORM_SDK_ROOT=/srv/mer</span><br><span class="line">curl -k -O http://releases.sailfishos.org/sdk/installers/latest/Jolla-latest-SailfishOS_Platform_SDK_Chroot-i486.tar.bz2 ;</span><br><span class="line">sudo mkdir -p $PLATFORM_SDK_ROOT/sdks/sfossdk ;</span><br><span class="line">sudo tar --numeric-owner -p -xjf Jolla-latest-SailfishOS_Platform_SDK_Chroot-i486.tar.bz2 -C $PLATFORM_SDK_ROOT/sdks/sfossdk  ;</span><br><span class="line">echo &quot;export PLATFORM_SDK_ROOT=$PLATFORM_SDK_ROOT&quot; &gt;&gt; ~/.bashrc</span><br><span class="line">echo &#x27;alias sfossdk=$PLATFORM_SDK_ROOT/sdks/sfossdk/mer-sdk-chroot&#x27; &gt;&gt; ~/.bashrc ; exec bash ;</span><br><span class="line">echo &#x27;PS1=&quot;PlatformSDK $PS1&quot;&#x27; &gt; ~/.mersdk.profile ;</span><br><span class="line">echo &#x27;[ -d /etc/bash_completion.d ] &amp;&amp; for i in /etc/bash_completion.d/*;do . $i;done&#x27;  &gt;&gt; ~/.mersdk.profile ;</span><br><span class="line">sfossdk</span><br></pre></td></tr></table></figure>
<p>另开一个终端，输入<code>sfossdk</code>，进入mer下</p>
<blockquote>
<p>安装targets，官方教程：<a target="_blank" rel="noopener" href="https://sailfishos.org/wiki/Platform_SDK_Target_Installation">https://sailfishos.org/wiki/Platform_SDK_Target_Installation</a></p>
</blockquote>
<p>其实就是执行下面的命令，要下载这两个包，过程有些慢</p>
<p>（2019-06-13更新，修复链接地址为最新的） </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sdk-assistant create xiaomi-vince-latest http://releases.sailfishos.org/sdk/targets/Sailfish_OS-latest-Sailfish_SDK_Tooling-i486.tar.7z</span><br><span class="line">sdk-assistant create xiaomi-vince-armv7hl http://releases.sailfishos.org/sdk/targets/Sailfish_OS-latest-Sailfish_SDK_Target-armv7hl.tar.7z</span><br></pre></td></tr></table></figure>
<p>更新到最新（Update to latest）<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo ssu re x.y.z.ab</span><br><span class="line">sudo zypper ref</span><br><span class="line">sudo zypper dup</span><br></pre></td></tr></table></figure></p>
<p>安装打包的工具</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo zypper in android-tools createrepo_c</span><br></pre></td></tr></table></figure>
<h2 id="修改fixup-mountpoints"><a href="#修改fixup-mountpoints" class="headerlink" title="修改fixup-mountpoints"></a>修改fixup-mountpoints</h2><p>文件在<code>hybris/hybris-boot/fixup-mountpoints</code>，添加你的设备的，这里是vince。<br>adb到手机上，输入<code>ls -l /dev/block/platform/*/by-name/</code>, 获取分区信息，或者其他路径的，HADK里面有写</p>
<h2 id="Camera支持"><a href="#Camera支持" class="headerlink" title="Camera支持"></a>Camera支持</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cd $ANDROID_ROOT/external/droidmedia</span><br><span class="line">echo &#x27;DROIDMEDIA_32 := true&#x27; &gt;&gt; env.mk</span><br><span class="line">echo &#x27;FORCE_HAL:=1&#x27; &gt;&gt; env.mk</span><br><span class="line"></span><br><span class="line"># For video recorder</span><br><span class="line"># https://github.com/sailfishos/droidmedia/pull/11</span><br><span class="line">echo &#x27;MINIMEDIA_AUDIOPOLICYSERVICE_ENABLE:=1&#x27; &gt;&gt; env.mk</span><br><span class="line">echo &#x27;AUDIOPOLICYSERVICE_ENABLE:=1&#x27; &gt;&gt; env.mk</span><br></pre></td></tr></table></figure>
<h2 id="编译hybris-hal"><a href="#编译hybris-hal" class="headerlink" title="编译hybris-hal"></a>编译hybris-hal</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd $ANDROID_ROOT</span><br><span class="line">source build/envsetup.sh</span><br><span class="line">export USE_CCACHE=1</span><br><span class="line">breakfast $DEVICE</span><br><span class="line">make -j8 hybris-hal</span><br></pre></td></tr></table></figure>
<p>期间可能会报错，谷歌搜一下</p>
<h2 id="验证Kernel"><a href="#验证Kernel" class="headerlink" title="验证Kernel"></a>验证Kernel</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd $ANDROID_ROOT</span><br><span class="line">hybris/mer-kernel-check/mer_verify_kernel_config ./out/target/product/$DEVICE/obj/KERNEL_OBJ/.config</span><br></pre></td></tr></table></figure>
<p>出现WARNING或者ERROR，将提示的加入到你的defconfig中，我的在<code>kernel/xiaomi/vince/arch/arm64/configs/vince_defconfig</code>中<br>然后执行<code>make hybris-root</code>后重新验证。没有出现<code>ERROR</code>后可以执行<code>make hybris-recovery</code></p>
<h2 id="打包dhd（HADK-第7章）"><a href="#打包dhd（HADK-第7章）" class="headerlink" title="打包dhd（HADK 第7章）"></a>打包dhd（HADK 第7章）</h2><p>再开一个终端(我们这里称终端2)，输入<code>sfossdk</code>，进入mer打包环境下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd $ANDROID_ROOT</span><br><span class="line">rpm/dhd/helpers/build_packages.sh -d</span><br></pre></td></tr></table></figure>
<h2 id="打包droidmedia与audioflingerglue"><a href="#打包droidmedia与audioflingerglue" class="headerlink" title="打包droidmedia与audioflingerglue"></a>打包droidmedia与audioflingerglue</h2><p><del>&gt; 如果你的机器是32位的话那么下面的命令去掉<code>_32</code>,下面的也一样</del></p>
<p>在终端1中<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make -j$(nproc --all) $(external/droidmedia/detect_build_targets.sh $PORT_ARCH $(gettargetarch))</span><br></pre></td></tr></table></figure><br>在终端2中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">DROIDMEDIA_VERSION=$(git --git-dir external/droidmedia/.git describe --tags | sed \</span><br><span class="line">-r &quot;s/\-/\+/g&quot;)</span><br><span class="line">rpm/dhd/helpers/pack_source_droidmedia-localbuild.sh $DROIDMEDIA_VERSION</span><br><span class="line">mkdir -p hybris/mw/droidmedia-localbuild/rpm</span><br><span class="line">cp rpm/dhd/helpers/droidmedia-localbuild.spec \</span><br><span class="line">hybris/mw/droidmedia-localbuild/rpm/droidmedia.spec</span><br><span class="line">sed -ie &quot;s/0.0.0/$DROIDMEDIA_VERSION/&quot; \</span><br><span class="line">hybris/mw/droidmedia-localbuild/rpm/droidmedia.spec</span><br><span class="line">mv hybris/mw/droidmedia-$DROIDMEDIA_VERSION.tgz hybris/mw/droidmedia-localbuild</span><br><span class="line">rpm/dhd/helpers/build_packages.sh --build=hybris/mw/droidmedia-localbuild</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>在终端1中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make -j$(nproc --all) $(external/audioflingerglue/detect_build_targets.sh $PORT_ARCH $(gettargetarch))</span><br></pre></td></tr></table></figure>
<p>在终端2中<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">AUDIOFLINGERGLUE_VERSION=$(git --git-dir external/audioflingerglue/.git describe --tags | sed \</span><br><span class="line">-r &quot;s/\-/\+/g&quot;)</span><br><span class="line">rpm/dhd/helpers/pack_source_audioflingerglue-localbuild.sh $AUDIOFLINGERGLUE_VERSION</span><br><span class="line">mkdir -p hybris/mw/audioflingerglue-localbuild/rpm</span><br><span class="line">cp rpm/dhd/helpers/audioflingerglue-localbuild.spec \</span><br><span class="line">hybris/mw/audioflingerglue-localbuild/rpm/audioflingerglue.spec</span><br><span class="line">sed -ie &quot;s/0.0.0/$AUDIOFLINGERGLUE_VERSION/&quot; \</span><br><span class="line">hybris/mw/audioflingerglue-localbuild/rpm/audioflingerglue.spec</span><br><span class="line">mv hybris/mw/audioflingerglue-$AUDIOFLINGERGLUE_VERSION.tgz hybris/mw/audioflingerglue-localbuild</span><br><span class="line">rpm/dhd/helpers/build_packages.sh --build=hybris/mw/audioflingerglue-localbuild</span><br></pre></td></tr></table></figure></p>
<p>然后重新打包dhd<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm/dhd/helpers/build_packages.sh --droid-hal</span><br></pre></td></tr></table></figure></p>
<h2 id="打包其他中间件包-mw"><a href="#打包其他中间件包-mw" class="headerlink" title="打包其他中间件包(mw)"></a>打包其他中间件包(mw)</h2><p>注意到 <a target="_blank" rel="noopener" href="https://wiki.merproject.org/wiki/Adaptations/faq-hadk">https://wiki.merproject.org/wiki/Adaptations/faq-hadk</a> 搜索当前版本需要对应的mw版本号，不一定用最新的</p>
<p>执行 <code>rpm/dhd/helpers/build_packages.sh --mw</code> ,然后选择 <code>all</code> 即可</p>
<h3 id="【进阶】上传到obs打包"><a href="#【进阶】上传到obs打包" class="headerlink" title="【进阶】上传到obs打包"></a>【进阶】上传到obs打包</h3><p>将droid-local-repo/vince下 droid-hal-vince/<em>.rpm 跟audioflingerglue</em>.rpm 、 droidmedia*.rpm 上传到obs的droid-hal-vince下</p>
<p>例如这些包：<a target="_blank" rel="noopener" href="https://build.merproject.org/package/show/nemo:devel:hw:xiaomi:vince/droid-hal-vince">https://build.merproject.org/package/show/nemo:devel:hw:xiaomi:vince/droid-hal-vince</a></p>
<p>obs打包还需要dhc,dhv等等几个包，此处不详细说明了，可以到 <a target="_blank" rel="noopener" href="https://github.com/mer-hybris">https://github.com/mer-hybris</a> 看其他机型的</p>
<h2 id="打包dhv"><a href="#打包dhv" class="headerlink" title="打包dhv"></a>打包dhv</h2><p>也就是 droid-hal-$DEVICE-version</p>
<p><code>rpm/dhd/helpers/build_packages.sh -v</code></p>
<p>如果提示 droid-configs 之类的找不到，需要手动安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sb2 -t $VENDOR-$DEVICE-$PORT_ARCH -R -msdk-install zypper -n install droid-config-$DEVICE</span><br></pre></td></tr></table></figure>
<h2 id="Jolla-RELEASE-DEVICE-ARCH-ks"><a href="#Jolla-RELEASE-DEVICE-ARCH-ks" class="headerlink" title="Jolla-@RELEASE@-$DEVICE-@ARCH@.ks"></a>Jolla-@RELEASE@-$DEVICE-@ARCH@.ks</h2><p><del>~obs打包完之后，将droid-config-vince-kickstart-configuration-0.2.4*.armv7hl.rpm 下载下来，解压获得Jolla-@RELEASE@-$DEVICE-@ARCH@.ks放到$ANDROID_ROOT下面</del>~</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cd $ANDROID_ROOT</span><br><span class="line">HA_REPO=&quot;repo --name=adaptation-community-common-$DEVICE-@RELEASE@&quot;</span><br><span class="line">HA_DEV=&quot;repo --name=adaptation-community-$DEVICE-@RELEASE@&quot;</span><br><span class="line">KS=&quot;Jolla-@RELEASE@-$DEVICE-@ARCH@.ks&quot;</span><br><span class="line">sed \</span><br><span class="line">&quot;/$HA_REPO/i$HA_DEV --baseurl=file:\/\/$ANDROID_ROOT\/droid-local-repo\/$DEVICE&quot; \</span><br><span class="line">$ANDROID_ROOT/hybris/droid-configs/installroot/usr/share/kickstarts/$KS \</span><br><span class="line">&gt; $KS</span><br></pre></td></tr></table></figure>
<h2 id="镜像制作"><a href="#镜像制作" class="headerlink" title="镜像制作"></a>镜像制作</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cd $ANDROID_ROOT</span><br><span class="line">RELEASE=2.1.4.14</span><br><span class="line">EXTRA_NAME=-alpha1</span><br><span class="line">hybris/droid-configs/droid-configs-device/helpers/process_patterns.sh</span><br><span class="line">sudo mic create fs --arch=$PORT_ARCH \</span><br><span class="line">--tokenmap=ARCH:$PORT_ARCH,RELEASE:$RELEASE,EXTRA_NAME:$EXTRA_NAME \</span><br><span class="line">--record-pkgs=name,url \</span><br><span class="line">--outdir=sfe-$DEVICE-$RELEASE$EXTRA_NAME \</span><br><span class="line">--pack-to=sfe-$DEVICE-$RELEASE$EXTRA_NAME.tar.bz2 \</span><br><span class="line">$ANDROID_ROOT/Jolla-@RELEASE@-$DEVICE-@ARCH@.ks</span><br></pre></td></tr></table></figure>
<p>在当前目录下会有一个 <code>sfe-$DEVICE-$RELEASE$EXTRA_NAME</code>目录，下面的 <code>sailfishos-$DEVICE-$RELEASE$EXTRA_NAME.zip</code>就是要使用的刷机包</p>
<h2 id="刷机"><a href="#刷机" class="headerlink" title="刷机"></a>刷机</h2><p>刷入 lineageos-14.1的包，刷入上面的<code>sailfishos-$DEVICE-$RELEASE$EXTRA_NAME.zip</code>的包，重启</p>
<p>可以参考 <a target="_blank" rel="noopener" href="https://wiki.merproject.org/wiki/Adaptations/libhybris/Install_SailfishOS_for_Vince">https://wiki.merproject.org/wiki/Adaptations/libhybris/Install_SailfishOS_for_Vince</a></p>
<h2 id="调试"><a href="#调试" class="headerlink" title="调试"></a>调试</h2><p>欢迎加入 IRC #jolla-cn #sailfishos-porters (只限英文交流) 或 <a target="_blank" rel="noopener" href="https://t.me/joinchat/GTqoL1HLIYXWNf-JeijTAg">https://t.me/joinchat/GTqoL1HLIYXWNf-JeijTAg</a> 讨论</p>
<p>相关文档 </p>
<ul>
<li><a target="_blank" rel="noopener" href="https://sailfishos.org/hadk">https://sailfishos.org/hadk</a> </li>
<li><a target="_blank" rel="noopener" href="http://bit.ly/faq-hadk">http://bit.ly/faq-hadk</a> </li>
<li><a target="_blank" rel="noopener" href="http://bit.ly/port-channel-log">http://bit.ly/port-channel-log</a> </li>
<li><a target="_blank" rel="noopener" href="http://bit.ly/always-grep-irc-logs">http://bit.ly/always-grep-irc-logs</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2018-01-30T06:28:28.000Z" title="2018/1/30 14:28:28">2018-01-30</time>发表</span><span class="level-item"><time dateTime="2025-07-29T01:33:42.444Z" title="2025/7/29 09:33:42">2025-07-29</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Java/">Java</a><span> / </span><a class="link-muted" href="/categories/Java/Tomcat/">Tomcat</a></span><span class="level-item">2 分钟读完 (大约299个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/01/30/Tomcat%E4%BF%A1%E4%BB%BBhttps%E7%BD%91%E7%AB%99/">Tomcat信任https网站</a></h1><div class="content"><h2 id="在使用微信发送告警的时候出现无法使用https网址的问题，解决方式如下"><a href="#在使用微信发送告警的时候出现无法使用https网址的问题，解决方式如下" class="headerlink" title="在使用微信发送告警的时候出现无法使用https网址的问题，解决方式如下"></a>在使用微信发送告警的时候出现无法使用https网址的问题，解决方式如下</h2><h3 id="导出微信的证书"><a href="#导出微信的证书" class="headerlink" title="导出微信的证书"></a>导出微信的证书</h3><p><code>openssl s_client -connect qyapi.weixin.qq.com:443 2&gt;&amp;1 |sed -ne &#39;/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p&#39; &gt; weixin.crt</code></p>
<p>使用<a href="/files/SSLPoke.class">SSLPoke.class</a>确认是否还有上层证书，如果存在也导入</p>
<p><code>java -Djavax.net.debug=ssl  SSLPoke qyapi.weixin.qq.com 443</code></p>
<p>看到有类似下面的则表明有上层证书:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">AuthorityInfoAccess [</span><br><span class="line">  [</span><br><span class="line">   accessMethod: ocsp</span><br><span class="line">   accessLocation: URIName: http://gn.symcd.com</span><br><span class="line">,</span><br><span class="line">   accessMethod: caIssuers</span><br><span class="line">   accessLocation: URIName: http://gn.symcb.com/gn.crt</span><br><span class="line">]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>将<a target="_blank" rel="noopener" href="http://gn.symcb.com/gn.crt下载下来，并导入">http://gn.symcb.com/gn.crt下载下来，并导入</a><br><code>sudo keytool -import -v -trustcacerts -alias gnsymcb -keystore $JAVA_HOME/jre/lib/security/jssecacerts -file gn.crt</code></p>
<h3 id="导入到jdk中"><a href="#导入到jdk中" class="headerlink" title="导入到jdk中"></a>导入到jdk中</h3><p><code>sudo keytool -import -v -trustcacerts -alias qyapiweixin -keystore $JAVA_HOME/jre/lib/security/jssecacerts -file weixin.crt</code></p>
<h3 id="更新证书"><a href="#更新证书" class="headerlink" title="更新证书"></a>更新证书</h3><p>需要先删除再导入新的<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo keytool -delete -keystore $JAVA_HOME/jre/lib/security/cacerts -alias qyapiweixin    </span><br><span class="line">sudo keytool -import -v -trustcacerts -alias qyapiweixin -keystore $JAVA_HOME/jre/lib/security/cacerts -file weixin.crt</span><br></pre></td></tr></table></figure></p>
<h3 id="指定tomcat使用证书-非必须"><a href="#指定tomcat使用证书-非必须" class="headerlink" title="指定tomcat使用证书(非必须)"></a>指定tomcat使用证书(非必须)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/apache-tomcat-8.5.6/bin/setenv.sh</span><br><span class="line">JAVA_OPTS=&quot;-Djava.awt.headless=true -Dfile.encoding=UTF-8 -server -Xms2048m -Xmx2048m -XX:NewSize=512m -XX:MaxNewSize=512m -XX:PermSize=512m -XX:MaxPermSize=512m -XX:+DisableExplicitGC -Djavax.net.ssl.trustStore=/usr/local/java/jdk8/jre/lib/security/jssecacerts&quot;</span><br></pre></td></tr></table></figure>
<p>或者在 /usr/local/apache-tomcat-8.5.6/conf/server.xml的ssl配置部分指定keystore，如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;Connector port=&quot;443&quot; protocol=&quot;org.apache.coyote.http11.Http11Protocol&quot;</span><br><span class="line">              maxThreads=&quot;150&quot; SSLEnabled=&quot;true&quot; scheme=&quot;https&quot; secure=&quot;true&quot;</span><br><span class="line">              clientAuth=&quot;false&quot; sslProtocol=&quot;TLS&quot;</span><br><span class="line">              URIEncoding=&quot;utf-8&quot;</span><br><span class="line">              keystoreFile=&quot;/usr/local/java/jdk7/jre/lib/security/jssecacerts&quot;</span><br><span class="line">              keystorePass=&quot;yourpassword&quot;</span><br><span class="line">              /&gt;</span><br></pre></td></tr></table></figure>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2018-01-29T08:36:17.000Z" title="2018/1/29 16:36:17">2018-01-29</time>发表</span><span class="level-item"><time dateTime="2025-07-29T01:33:42.448Z" title="2025/7/29 09:33:42">2025-07-29</time>更新</span><span class="level-item">5 分钟读完 (大约742个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/01/29/opensips%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8%E6%95%B4%E7%90%86/">opensips安装使用整理</a></h1><div class="content"><blockquote>
<p>部分内容来自 <a target="_blank" rel="noopener" href="https://github.com/Ci-Jie/OpenSIPS">https://github.com/Ci-Jie/OpenSIPS</a> ，其他的很多教程都是坑！！！</p>
</blockquote>
<h2 id="安装opensips"><a href="#安装opensips" class="headerlink" title="安装opensips"></a>安装opensips</h2><ul>
<li>CentOS release 6.9 (Final) (内核 4.10.4)</li>
<li>MySQL 5.6</li>
<li>Opensips 2.1</li>
</ul>
<h4 id="安装依赖库等"><a href="#安装依赖库等" class="headerlink" title="安装依赖库等"></a>安装依赖库等</h4><p><code>sudo yum -y install mysql mysql-server mysql-devel git make bison libdbi-dbd-mysql</code> (具体还有什么忘记了，不能重现当时安装的了，后面缺什么再装吧)</p>
<h4 id="检出代码"><a href="#检出代码" class="headerlink" title="检出代码"></a>检出代码</h4><p><code>cd ~/ &amp;&amp; git clone https://github.com/OpenSIPS/opensips.git -b 2.1 opensips_2_1</code></p>
<h4 id="修改配置开启mysql支持"><a href="#修改配置开启mysql支持" class="headerlink" title="修改配置开启mysql支持"></a>修改配置开启mysql支持</h4><p><code>vim ~/opensips_2_1/Makefile.conf.tmplate</code> ,移除<code>exclude_modules</code>中db_mysql</p>
<h4 id="安装opensips-1"><a href="#安装opensips-1" class="headerlink" title="安装opensips"></a>安装opensips</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/opensips_2_1</span><br><span class="line">sudo make all</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure>
<h4 id="安裝完后，修改部分opensipsctlrc文件，如下："><a href="#安裝完后，修改部分opensipsctlrc文件，如下：" class="headerlink" title="安裝完后，修改部分opensipsctlrc文件，如下："></a>安裝完后，修改部分opensipsctlrc文件，如下：</h4><p><code>sudo vim /usr/local/etc/opensips/opensipsctlrc</code></p>
<p>将DB开头的修改为自己的mysql连接情况（事先创建好opensips用户，或者偷懒用root，但是一定要注意安全），SIP_DOMAIN修改为主机ip<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">## your SIP domain</span><br><span class="line">SIP_DOMAIN=yourip</span><br><span class="line">## chrooted directory</span><br><span class="line"># $CHROOT_DIR=&quot;/path/to/chrooted/directory&quot;</span><br><span class="line">## database type: MYSQL, PGSQL, ORACLE, DB_BERKELEY, or DBTEXT, </span><br><span class="line">## by default none is loaded</span><br><span class="line"># If you want to setup a database with opensipsdbctl, you must at least specify</span><br><span class="line"># this parameter.</span><br><span class="line">DBENGINE=MYSQL</span><br><span class="line">## database host</span><br><span class="line">DBHOST=localhost</span><br><span class="line">## database name (for ORACLE this is TNS name)</span><br><span class="line">DBNAME=opensips</span><br><span class="line"># database path used by dbtext or db_berkeley</span><br><span class="line">DB_PATH=&quot;/usr/local/etc/opensips/dbtext&quot;</span><br><span class="line">## database read/write user</span><br><span class="line">DBRWUSER=opensips</span><br><span class="line">## password for database read/write user</span><br><span class="line">DBRWPW=&quot;opensipsrw&quot;</span><br><span class="line">## database super user (for ORACLE this is &#x27;scheme-creator&#x27; user)</span><br><span class="line">DBROOTUSER=&quot;root&quot;</span><br><span class="line"># user name column</span><br><span class="line">USERCOL=&quot;username&quot;</span><br></pre></td></tr></table></figure></p>
<h4 id="初始化mysql数据库表"><a href="#初始化mysql数据库表" class="headerlink" title="初始化mysql数据库表"></a>初始化mysql数据库表</h4><p><code>sudo /usr/local/sbin/opensipsdbctl create</code>，会提示输入root密码，然后会出现下面的提示<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">MySQL password for root: </span><br><span class="line">INFO: test server charset</span><br><span class="line">INFO: creating database opensips ...</span><br><span class="line">INFO: Core OpenSIPS tables succesfully created.</span><br><span class="line">Install presence related tables? (y/n): y  </span><br><span class="line">INFO: creating presence tables into opensips ...</span><br><span class="line">INFO: Presence tables succesfully created.</span><br><span class="line">Install tables for imc cpl siptrace domainpolicy carrierroute userblacklist? (y/n): y</span><br><span class="line">INFO: creating extra tables into opensips ...</span><br><span class="line">INFO: Extra tables succesfully created.</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>如果出现 <code>ERROR: database engine not specified, please setup one in the config script</code>，看看是否有执行权限</p>
</blockquote>
<h4 id="自定义监听端口及协议"><a href="#自定义监听端口及协议" class="headerlink" title="自定义监听端口及协议"></a>自定义监听端口及协议</h4><p>可以通过修改<code>/usr/local/etc/opensips/opensips.cfg</code>文件，修改<code>listen=</code>，注意这里的ip要用外网ip，udp改为tcp可以使用keepalive，让手机长时间在线。我的配置如下：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">advertised_address=myip</span><br><span class="line">alias=myip</span><br><span class="line">...</span><br><span class="line">listen=tcp:myip:5060   # CUSTOMIZE ME</span><br><span class="line">tcp_connection_lifetime=3600</span><br><span class="line">tcp_connect_timeout=5000</span><br><span class="line">tcp_keepalive=1</span><br><span class="line">tcp_keepcount=30</span><br><span class="line">tcp_keepidle=60</span><br><span class="line">tcp_keepinterval = 60</span><br></pre></td></tr></table></figure></p>
<h4 id="新增domain到数据库"><a href="#新增domain到数据库" class="headerlink" title="新增domain到数据库"></a>新增domain到数据库</h4><blockquote>
<p>这个domain就是上面填写的ip地址，创建用户的时候也要用到。</p>
</blockquote>
<p>用root连接mysql，选择opensips库，插入一条记录<code>INSERT INTO opensips.domain(domain) VALUES(&#39;your ip&#39;);</code>(注意修改为自己的ip)</p>
<h4 id="opensips操作"><a href="#opensips操作" class="headerlink" title="opensips操作"></a>opensips操作</h4><p>启动 <code>/usr/local/sbin/opensipsctl start</code></p>
<p>停止 <code>/usr/local/sbin/opensipsctl stop</code></p>
<p>重启 <code>/usr/local/sbin/opensipsctl restart</code></p>
<h4 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h4><p><code>/usr/local/sbin/opensipsctl add user@myourip password</code></p>
<p>这里的user就是号码，尽量用数字（键盘上没有字母啊）</p>
<h3 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h3><ul>
<li>PC <ul>
<li>Zoiper</li>
<li>Linphone</li>
</ul>
</li>
<li>Ios<ul>
<li>Zoiper</li>
</ul>
</li>
</ul>
<p>其他未测试，可以到 <a target="_blank" rel="noopener" href="http://www.voip-info.org/wiki/view/Open+Source+VOIP+Software">http://www.voip-info.org/wiki/view/Open+Source+VOIP+Software</a> 查找</p>
<h4 id="ios端配置（尽量后台运行）"><a href="#ios端配置（尽量后台运行）" class="headerlink" title="ios端配置（尽量后台运行）"></a>ios端配置（尽量后台运行）</h4><p>如图所示：</p>
<p><img src="https://i.loli.net/2018/01/29/5a6ee3c84b5b4.jpg" alt="微信图片_20180129170327.jpg"><br><img src="https://i.loli.net/2018/01/29/5a6ee3c86f20d.jpg" alt="微信图片_20180129170352.jpg"><br><img src="https://i.loli.net/2018/01/29/5a6ee3c876295.jpg" alt="微信图片_20180129170357.jpg"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-12-29T06:32:00.000Z" title="2017/12/29 14:32:00">2017-12-29</time>发表</span><span class="level-item"><time dateTime="2025-07-29T01:33:42.452Z" title="2025/7/29 09:33:42">2025-07-29</time>更新</span><span class="level-item">几秒读完 (大约75个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/12/29/%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8C%96%E7%9F%BF/">使用浏览器挖矿</a></h1><div class="content"><h3 id="已GG"><a href="#已GG" class="headerlink" title="已GG"></a>已GG</h3><iframe src="https://authedmine.com/media/miner.html?key=Tjj5gaLGfnQ2157RNOMjhdT1ck0mluS5" width="auto" height="280" frameborder="0"></iframe>

<p>如上所示，如果你浏览器的广告拦截插件正常的话。</p>
<p>具体使用见：<a target="_blank" rel="noopener" href="https://coinhive.com/documentation">https://coinhive.com/documentation</a> ，有四种模式，静默加载的基本上被adblock掉了，建议用simple ui</p>
<p>或者自己搭代理：<a target="_blank" rel="noopener" href="https://github.com/cazala/coin-hive-stratum">https://github.com/cazala/coin-hive-stratum</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-12-08T09:57:35.000Z" title="2017/12/8 17:57:35">2017-12-08</time>发表</span><span class="level-item"><time dateTime="2025-07-29T01:33:42.456Z" title="2025/7/29 09:33:42">2025-07-29</time>更新</span><span class="level-item">3 分钟读完 (大约477个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/12/08/%E8%87%AA%E5%8A%A8%E6%B8%85%E7%90%86k8s%E4%B8%AD%E7%9A%84%E5%AE%B9%E5%99%A8_%E5%8D%B7_%E9%95%9C%E5%83%8F/">自动清理k8s中的容器、卷、镜像</a></h1><div class="content"><blockquote>
<p>镜像源码 <a target="_blank" rel="noopener" href="https://github.com/meltwater/docker-cleanup">https://github.com/meltwater/docker-cleanup</a></p>
</blockquote>
<h4 id="注意：这个镜像会将所有已经退出的容器、未使用的镜像和data-only的容器，除非你将他们加到保存的变量中。注意正确配置docker-api的版本，以免删除所有的镜像。小心挂载-var-lib-docker，因为如果挂载后没有使用的话，也会被当作未使用的卷删掉。"><a href="#注意：这个镜像会将所有已经退出的容器、未使用的镜像和data-only的容器，除非你将他们加到保存的变量中。注意正确配置docker-api的版本，以免删除所有的镜像。小心挂载-var-lib-docker，因为如果挂载后没有使用的话，也会被当作未使用的卷删掉。" class="headerlink" title="注意：这个镜像会将所有已经退出的容器、未使用的镜像和data-only的容器，除非你将他们加到保存的变量中。注意正确配置docker api的版本，以免删除所有的镜像。小心挂载 /var/lib/docker，因为如果挂载后没有使用的话，也会被当作未使用的卷删掉。"></a>注意：这个镜像会将所有已经退出的容器、未使用的镜像和data-only的容器，除非你将他们加到保存的变量中。注意正确配置docker api的版本，以免删除所有的镜像。小心挂载 /var/lib/docker，因为如果挂载后没有使用的话，也会被当作未使用的卷删掉。</h4><p>支持的变量</p>
<ul>
<li><strong>CLEAN_PERIOD=1800</strong> - Interval in seconds to sleep after completing a cleaning run. Defaults to 1800 seconds = 30 minutes.</li>
<li><strong>DELAY_TIME=1800</strong> - Seconds to wait before removing exited containers and unused images. Defaults to 1800 seconds = 30 minutes.</li>
<li><strong>KEEP_IMAGES</strong> - List of images to avoid cleaning, e.g. “ubuntu:trusty, ubuntu:latest”. Defaults to clean all unused images.</li>
<li><strong>KEEP_CONTAINERS</strong> - List of images for exited or dead containers to avoid cleaning, e.g. “ubuntu:trusty, ubuntu:latest”.</li>
<li><strong>KEEP_CONTAINERS_NAMED</strong> - List of names for exited or dead containers to avoid cleaning, e.g. “my-container1, persistent-data”.</li>
<li><strong>LOOP</strong> - Add the ability to do non-looped cleanups, run it once and exit. Options are true, false. Defaults to true to run it forever in loops.</li>
<li><strong>DEBUG</strong> - Set to 1 to enable more debugging output on pattern matches</li>
<li><strong>DOCKER_API_VERSION</strong> - The docker API version to use. This defaults to 1.20, but you can override it here in case the docker version on your host differs from the one that is installed in this container. You can find  - this on your host system by running <code>docker version --format '{{.Client.APIVersion}}'</code>.</li>
</ul>
<p>对于即使已经不运行了也不想清理的镜像，使用KEEP_IMAGES变量处理，此处我们添写： </p>
<p><code>vmware/harbor-*:*,*calico:*,*registry:*,*kubernetes-dashboard-amd64:*,*nginx-ingress-controller:*,*cvallance/mongo-k8s-sidecar:*</code></p>
<p>docker-cleanup-daemonset.yaml 配置如下：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: extensions/v1beta1</span><br><span class="line">kind: DaemonSet</span><br><span class="line">metadata:</span><br><span class="line">  labels:</span><br><span class="line">    name: clean-up</span><br><span class="line">  name: clean-up</span><br><span class="line">  namespace: kube-system</span><br><span class="line">spec:</span><br><span class="line">  updateStrategy:</span><br><span class="line">    type: &quot;RollingUpdate&quot;</span><br><span class="line">    rollingUpdate:</span><br><span class="line">      maxUnavailable: 1</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      labels:</span><br><span class="line">        app: clean-up</span><br><span class="line">    spec:</span><br><span class="line">      tolerations:</span><br><span class="line">        - key: &quot;LB&quot;</span><br><span class="line">          operator: &quot;Exists&quot;</span><br><span class="line">          effect: &quot;NoExecute&quot;</span><br><span class="line">      volumes:</span><br><span class="line">        - name: docker-sock</span><br><span class="line">          hostPath:</span><br><span class="line">            path: /var/run/docker.sock</span><br><span class="line">        - name: docker-directory</span><br><span class="line">          hostPath:</span><br><span class="line">            path: /data/kubernetes/docker</span><br><span class="line">      containers:</span><br><span class="line">        - image: meltwater/docker-cleanup:latest</span><br><span class="line">          name: clean-up</span><br><span class="line">          env:</span><br><span class="line">            - name: CLEAN_PERIOD</span><br><span class="line">              value: &quot;1800&quot;</span><br><span class="line">            - name: DELAY_TIME</span><br><span class="line">              value: &quot;60&quot;</span><br><span class="line">            - name: DOCKER_API_VERSION</span><br><span class="line">              value: &quot;1.29&quot;</span><br><span class="line">            - name: KEEP_IMAGES</span><br><span class="line">              value: &quot;vmware/harbor-*:*,*calico:*,*registry:*,*kubernetes-dashboard-amd64:*,*nginx-ingress-controller:*,*cvallance/mongo-k8s-sidecar:*&quot;</span><br><span class="line">          volumeMounts:</span><br><span class="line">            - mountPath: /var/run/docker.sock</span><br><span class="line">              name: docker-sock</span><br><span class="line">              readOnly: false</span><br><span class="line">            - mountPath: /var/lib/docker</span><br><span class="line">              name: docker-directory</span><br><span class="line">              readOnly: false</span><br></pre></td></tr></table></figure></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-12-08T09:49:25.000Z" title="2017/12/8 17:49:25">2017-12-08</time>发表</span><span class="level-item"><time dateTime="2025-07-29T01:33:42.450Z" title="2025/7/29 09:33:42">2025-07-29</time>更新</span><span class="level-item">6 分钟读完 (大约965个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/12/08/%E4%BD%BF%E7%94%A8DaemonSet-Taint-Tolerations-NodeSelector%E9%83%A8%E7%BD%B2Nginx-ingress-controller/">使用DaemonSet+Taint/Tolerations+NodeSelector部署Nginx ingress controller</a></h1><div class="content"><blockquote>
<p>使用DaemonSet+NodeSelector+Tolerations的方式定义Nginx Ingress Controller，给专门节点打上Label+Taint，使得这些专门节点只运行Nginx Ingress Controller，而不会调度和运行其他业务容器，只用来做代理节点。</p>
</blockquote>
<ul>
<li><p>在Kuberntes Cluster中准备N个节点，我们称之为代理节点。在这N个节点上只部署Nginx Ingress Controller（简称NIC）实例，不会跑其他业务容器。</p>
</li>
<li><p>给代理节点打上NoExecute Taint，防止业务容器调度或运行在这些节点。</p>
<p>  <code>kubectl taint nodes 10.8.8.234 LB=NIC:NoExecute</code></p>
</li>
<li><p>给代理节点打上Label，让NIC只部署在打了对应Lable的节点上。<br>  <code>kubectl label nodes 10.8.8.234 LB=NIC</code></p>
</li>
<li><p>修改calico-node配置，让calico可以在NoExecute节点上运行</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">    spec:</span><br><span class="line">    ...</span><br><span class="line">    spec:</span><br><span class="line">      tolerations:</span><br><span class="line">      - key: &quot;LB&quot;</span><br><span class="line">        operator: &quot;Exists&quot;</span><br><span class="line">        effect: &quot;NoExecute&quot;</span><br><span class="line">    ```    </span><br><span class="line"></span><br><span class="line">- 定义DaemonSet Yaml文件，注意加上Tolerations和Node Selector。(注意先创建serviceAccount、role等)    </span><br><span class="line">    </span><br></pre></td></tr></table></figure>
<p>  apiVersion: extensions/v1beta1<br>  kind: DaemonSet<br>  metadata:<br>  annotations:</p>
<pre><code>deployment.kubernetes.io/revision: &quot;4&quot;
</code></pre><p>  labels:</p>
<pre><code>k8s-app: nginx-ingress-controller
</code></pre><p>  name: nginx-ingress-controller<br>  namespace: kube-system<br>  spec:<br>  selector:</p>
<pre><code>matchLabels:
k8s-app: nginx-ingress-controller
</code></pre><p>  template:</p>
<pre><code>metadata:
annotations:
    prometheus.io/port: &quot;10254&quot;
    prometheus.io/scrape: &quot;true&quot;
creationTimestamp: null
labels:
    k8s-app: nginx-ingress-controller
spec:
# 加上对应的Node Selector
nodeSelector:
    LB: NIC
# 加上对应的Tolerations
tolerations:
- key: &quot;LB&quot;
    operator: &quot;Equal&quot;
    value: &quot;NIC&quot;
    effect: &quot;NoExecute&quot;
containers:
- args:
    - /nginx-ingress-controller
    - --default-backend-service=$(POD_NAMESPACE)/default-http-backend
    - --tcp-services-configmap=$(POD_NAMESPACE)/nginx-tcp-ingress-configmap
    - --configmap=$(POD_NAMESPACE)/nginx-configuration
    env:
    - name: POD_NAME
    valueFrom:
        fieldRef:
        apiVersion: v1
        fieldPath: metadata.name
    - name: POD_NAMESPACE
    valueFrom:
        fieldRef:
        apiVersion: v1
        fieldPath: metadata.namespace
    image: dceph02.rmz.flamingo-inc.com:8888/mynginx/nginx-ingress-controller:0.9.0-beta.11
    imagePullPolicy: IfNotPresent
    livenessProbe:
    failureThreshold: 3
    httpGet:
        path: /healthz
        port: 10254
        scheme: HTTP
    initialDelaySeconds: 10
    periodSeconds: 10
    successThreshold: 1
    timeoutSeconds: 1
    name: nginx-ingress-controller
    ports:
    - containerPort: 80
    hostPort: 80
    protocol: TCP
    - containerPort: 443
    hostPort: 443
    protocol: TCP
    readinessProbe:
    failureThreshold: 3
    httpGet:
        path: /healthz
        port: 10254
        scheme: HTTP
    periodSeconds: 10
    successThreshold: 1
    timeoutSeconds: 1
    resources: &#123;&#125;
hostNetwork: true
serviceAccount: ingress
serviceAccountName: ingress
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">    </span><br><span class="line">- 创建default backend服务</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</code></pre><p>  apiVersion: extensions/v1beta1<br>  kind: Deployment<br>  metadata:<br>  name: default-http-backend<br>  labels:</p>
<pre><code>k8s-app: default-http-backend
</code></pre><p>  namespace: kube-system<br>  spec:<br>  replicas: 1<br>  template:</p>
<pre><code>metadata:
labels:
    k8s-app: default-http-backend
spec:
terminationGracePeriodSeconds: 60
containers:
- name: default-http-backend
    # Any image is permissable as long as:
    # 1. It serves a 404 page at /
    # 2. It serves 200 on a /healthz endpoint
    image: gcr.io/google_containers/defaultbackend:1.0
    livenessProbe:
    httpGet:
        path: /healthz
        port: 8080
        scheme: HTTP
    initialDelaySeconds: 30
    timeoutSeconds: 5
    ports:
    - containerPort: 8080
    resources:
    limits:
        cpu: 10m
        memory: 20Mi
    requests:
        cpu: 10m
        memory: 20Mi
</code></pre><hr>
<p>  apiVersion: v1<br>  kind: Service<br>  metadata:<br>  name: default-http-backend<br>  namespace: kube-system<br>  labels:</p>
<pre><code>k8s-app: default-http-backend
</code></pre><p>  spec:<br>  ports:</p>
<ul>
<li>port: 80<br>  targetPort: 8080<br>selector:<br>  k8s-app: default-http-backend<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">根据default-backend.yaml创建对应的Deployment和Service。 `kubectl create -f default-backend.yaml`</span><br><span class="line"></span><br><span class="line">- 根据DaemonSet Yaml创建NIC DaemonSet，启动NIC。</span><br><span class="line"></span><br><span class="line">    `kubectl create -f nginx-ingress-daemonset.yaml`</span><br><span class="line"></span><br><span class="line">至此，NIC已经运行在代理节点上了，下面为测试内容。</span><br><span class="line"></span><br><span class="line">- (选择性)确认NIC启动成功后，创建测试用的服务。</span><br><span class="line"></span><br></pre></td></tr></table></figure>
kubectl run echoheaders –image=gcr.io/google_containers/echoserver:1.8 –replicas=1 –port=8080<br>kubectl expose deployment echoheaders –port=80 –target-port=8080 –name=echoheaders-x<br>kubectl expose deployment echoheaders –port=80 –target-port=8080 –name=echoheaders-y<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">创建测试用的Ingress Object</span><br><span class="line"></span><br></pre></td></tr></table></figure>
apiVersion: extensions/v1beta1<br>kind: Ingress<br>metadata:<br>name: echomap<br>namespace: default<br>spec:<br>rules:</li>
<li>host: foo.bar.com<br>  http:<br>  paths:<ul>
<li>backend:<br>  serviceName: echoheaders-x<br>  servicePort: 80<br>  path: /foo</li>
</ul>
</li>
<li>host: bar.baz.com<br>  http:<br>  paths:<ul>
<li>backend:<br>  serviceName: echoheaders-y<br>  servicePort: 80<br>  path: /bar</li>
<li>backend:<br>  serviceName: echoheaders-x<br>  servicePort: 80<br>  path: /foo<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- (选择性)查看ingress的代理地址</span><br><span class="line"></span><br></pre></td></tr></table></figure>
[root@host ~]# kubectl describe ing echomap<br>Name:                   echomap<br>Namespace:              default<br>Address:                10.8.8.234<br>Default backend:        default-http-backend:80 (172.254.109.193:8080)<br>Rules:<br>Host          Path    Backends</li>
</ul>
</li>
</ul>
<hr>
<p>  foo.bar.com</p>
<pre><code>/foo    echoheaders-x:80 (&lt;none&gt;)
</code></pre><p>  bar.baz.com</p>
<pre><code>/bar    echoheaders-y:80 (&lt;none&gt;)
/foo    echoheaders-x:80 (&lt;none&gt;)
</code></pre><p>  Annotations:<br>  Events:<br>  FirstSeen     LastSeen        Count   From                    SubObjectPath   Type            Reason  Message</p>
<hr>
<p>  35m           35m             1       ingress-controller                      Normal          CREATE  Ingress default/echomap<br>  35m           35m             1       ingress-controller                      Normal          UPDATE  Ingress default/echomap</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 测试</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>  [root@host ~]# curl 10.8.8.234/foo -H ‘Host: foo.bar.com’</p>
<p>  Hostname: echoheaders-1076692255-p1ndv<br>  Pod Information:</p>
<pre><code>-no pod information available-
</code></pre><p>  Server values:</p>
<pre><code>server_version=nginx: 1.13.3 - lua: 10008
</code></pre><p>  Request Information:</p>
<pre><code>client_address=172.254.246.192
method=GET
real path=/foo
query=
request_version=1.1
request_uri=http://foo.bar.com:8080/foo
</code></pre><p>  Request Headers:</p>
<pre><code>accept=*/*
connection=close
host=foo.bar.com
user-agent=curl/7.29.0
x-forwarded-for=10.8.8.234
x-forwarded-host=foo.bar.com
x-forwarded-port=80
x-forwarded-proto=http
x-original-uri=/foo
x-real-ip=10.8.8.234
x-scheme=http
</code></pre><p>  Request Body:</p>
<pre><code>-no body in request-
</code></pre><p>  [root@dceph04 ~]# curl 10.8.8.234/foo -H ‘Host: bar.baz.com’</p>
<p>  Hostname: echoheaders-1076692255-p1ndv<br>  Pod Information:</p>
<pre><code>-no pod information available-
</code></pre><p>  Server values:</p>
<pre><code>server_version=nginx: 1.13.3 - lua: 10008
</code></pre><p>  Request Information:</p>
<pre><code>client_address=172.254.246.192
method=GET
real path=/foo
query=
request_version=1.1
request_uri=http://bar.baz.com:8080/foo
</code></pre><p>  Request Headers:</p>
<pre><code>accept=*/*
connection=close
host=bar.baz.com
user-agent=curl/7.29.0
x-forwarded-for=10.8.8.234
x-forwarded-host=bar.baz.com
x-forwarded-port=80
x-forwarded-proto=http
x-original-uri=/foo
x-real-ip=10.8.8.234
x-scheme=http
</code></pre><p>  Request Body:</p>
<pre><code>-no body in request-
</code></pre><p>  <code>`</code></p>
</li>
</ul>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><pre><code>https://my.oschina.net/jxcdwangtao/blog/1523812                
</code></pre></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-08-21T10:26:45.000Z" title="2017/8/21 18:26:45">2017-08-21</time>发表</span><span class="level-item"><time dateTime="2025-07-29T01:33:42.441Z" title="2025/7/29 09:33:42">2025-07-29</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Java/">Java</a><span> / </span><a class="link-muted" href="/categories/Java/Python/">Python</a></span><span class="level-item">1 分钟读完 (大约185个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/08/21/Java%E4%B8%8EPython%E5%AE%89%E5%85%A8%E8%BD%AC%E7%A0%81%E9%93%BE%E6%8E%A5/">Java与Python安全转码链接</a></h1><div class="content"><h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">String OriginUrl = &quot;https://meijumao.cn/yunparse/index.php?url=//美剧/周一/GOT权游/S07/Online/02按时发达的十分.mp4~bdyun&quot;;</span><br><span class="line">URL repoUrl = new URL(OriginUrl);</span><br><span class="line">URI uri;</span><br><span class="line">try &#123;</span><br><span class="line">    uri = new URI(repoUrl.getProtocol(), repoUrl.getUserInfo(), repoUrl.getHost(), repoUrl.getPort(), repoUrl.getPath(), repoUrl.getQuery(), repoUrl.getRef());</span><br><span class="line">    System.out.println(uri.toASCIIString());</span><br><span class="line">&#125; catch (URISyntaxException e) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h3><p>python3:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import string</span><br><span class="line">import urllib.parse</span><br><span class="line"></span><br><span class="line">url = &quot;https://meijumao.cn/yunparse/index.php?url=//美剧/周一/GOT权游/S07/Online/02按时发达的十分.mp4~bdyun&quot;</span><br><span class="line">print(urllib.parse.quote(url,safe=string.printable))</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>python2:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import string</span><br><span class="line">from urllib import quote</span><br><span class="line"></span><br><span class="line">url = &quot;https://meijumao.cn/yunparse/index.php?url=//美剧/周一/GOT权游/S07/Online/02按时发达的十分.mp4~bdyun&quot;</span><br><span class="line">print urllib.parse.quote(url,safe=string.printable)</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>结果 <code>&#39;https://meijumao.cn/yunparse/index.php?url=//%E7%BE%8E%E5%89%A7/%E5%91%A8%E4%B8%80/GOT%E6%9D%83%E6%B8%B8/S07/Online/02%E6%8C%89%E6%97%B6%E5%8F%91%E8%BE%BE%E7%9A%84%E5%8D%81%E5%88%86.mp4~bdyun</code></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-06-02T09:57:21.000Z" title="2017/6/2 17:57:21">2017-06-02</time>发表</span><span class="level-item"><time dateTime="2025-07-29T01:33:42.440Z" title="2025/7/29 09:33:42">2025-07-29</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Java/">Java</a></span><span class="level-item">几秒读完 (大约55个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/06/02/Java-%E8%A7%A3%E6%9E%90json%E6%95%B0%E7%BB%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%BAJava%E5%AF%B9%E8%B1%A1/">Java 解析json数组字符串为Java对象</a></h1><div class="content"><p>套用罗锤子的话：这可能是最方便快捷的方式了</p>
<p>json字符串：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[&#123; &quot;number&quot; : &quot;3&quot;,</span><br><span class="line">  &quot;title&quot; : &quot;hello_world&quot;  </span><br><span class="line">&#125;,</span><br><span class="line">&#123; &quot;number&quot; : &quot;2&quot;,</span><br><span class="line">  &quot;title&quot; : &quot;hello_world&quot;  </span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure></p>
<p>Java代码：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class Wrapper&#123;</span><br><span class="line">    int number;</span><br><span class="line">    String title;       </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Gson gson = new Gson();</span><br><span class="line">Wrapper[] data = gson.fromJson(idcstring, Wrapper[].class);</span><br></pre></td></tr></table></figure></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-05-31T03:46:07.000Z" title="2017/5/31 11:46:07">2017-05-31</time>发表</span><span class="level-item"><time dateTime="2025-07-29T01:33:42.445Z" title="2025/7/29 09:33:42">2025-07-29</time>更新</span><span class="level-item">几秒读完 (大约33个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/05/31/awk-%E8%AE%A1%E7%AE%97%E4%B8%80%E5%88%97%E7%9A%84%E5%92%8C/">awk 计算一列的和</a></h1><div class="content"><p><code>awk &#39;&#123;sum += $10&#125;;END &#123;print sum&#125;&#39;</code></p>
<p>例如想计算nginx日志中206下载总数据和，则用<br><code>cat xxx.access.log|grep &quot; 206 &quot; |awk &#39;&#123;sum += $10&#125;;END &#123;print sum&#125;&#39;</code></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-05-27T09:54:08.000Z" title="2017/5/27 17:54:08">2017-05-27</time>发表</span><span class="level-item"><time dateTime="2025-07-29T01:33:42.443Z" title="2025/7/29 09:33:42">2025-07-29</time>更新</span><span class="level-item">1 分钟读完 (大约143个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/05/27/Python%E4%B8%80%E4%BA%9B%E6%A8%A1%E5%9D%97%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95%E8%AE%B0%E5%BD%95/">Python一些模块安装方法记录</a></h1><div class="content"><p>首先需要安装pip模块，如果yum中没有，则需要用 <a href="/files/get-pip.py">get-pip.py</a>安装</p>
<p><code>sudo python get-pip.py</code> 安装</p>
<h3 id="web-py"><a href="#web-py" class="headerlink" title="web.py"></a>web.py</h3><p><code>sudo pip install web.py</code></p>
<h3 id="mysql-connector"><a href="#mysql-connector" class="headerlink" title="mysql.connector"></a>mysql.connector</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget http://cdn.mysql.com/Downloads/Connector-Python/mysql-connector-python-1.0.11.zip </span><br><span class="line">unzip mysql-connector-python-1.0.11.zip </span><br><span class="line">cd mysql-connector-python-1.0.11  </span><br><span class="line">sudo python setup.py install </span><br></pre></td></tr></table></figure>
<h3 id="pytds（连接mssql）"><a href="#pytds（连接mssql）" class="headerlink" title="pytds（连接mssql）"></a>pytds（连接mssql）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install python-tds</span><br><span class="line">#sudo pip install bitarray</span><br></pre></td></tr></table></figure>
<h3 id="anjuke-中文转拼音"><a href="#anjuke-中文转拼音" class="headerlink" title="anjuke(中文转拼音)"></a>anjuke(中文转拼音)</h3><p><code>sudo pip install pinyin4py</code></p>
<h3 id="Python2-7安装"><a href="#Python2-7安装" class="headerlink" title="Python2.7安装"></a>Python2.7安装</h3><p>这样安装之后不会与之前的python2.6版本有冲突，3.x版本同理</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.python.org/ftp/python/2.7.8/Python-2.7.8.tgz</span><br><span class="line">tar xf Python-2.7.8.tgz</span><br><span class="line">cd Python-2.7.8</span><br><span class="line">./configure --prefix=/usr/local</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure></div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/3/">上一页</a></div><div class="pagination-next"><a href="/page/5/">下一页</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><a class="pagination-link" href="/page/2/">2</a></li><li><a class="pagination-link" href="/page/3/">3</a></li><li><a class="pagination-link is-current" href="/page/4/">4</a></li><li><a class="pagination-link" href="/page/5/">5</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://www.gravatar.com/avatar/72326950ba674fec08b31a0c90663fe2?s=128" alt="BirdZhang"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">BirdZhang</p><p class="is-size-6 is-block">一只早起的懒鸟</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Earth</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">46</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">75</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/0312birdzhang" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/0312birdzhang"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/0312birdzhang"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Irc/"><span class="level-start"><span class="level-item">Irc</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Java/"><span class="level-start"><span class="level-item">Java</span></span><span class="level-end"><span class="level-item tag">3</span></span></a><ul><li><a class="level is-mobile" href="/categories/Java/Python/"><span class="level-start"><span class="level-item">Python</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Java/Tomcat/"><span class="level-start"><span class="level-item">Tomcat</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Nginx/"><span class="level-start"><span class="level-item">Nginx</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/SailfishOS/"><span class="level-start"><span class="level-item">SailfishOS</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul><li><a class="level is-mobile" href="/categories/SailfishOS/Docker/"><span class="level-start"><span class="level-item">Docker</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-10-31T02:43:00.000Z">2025-10-31</time></p><p class="title"><a href="/2025/10/31/%E7%BB%99%E9%AD%94%E6%96%B9%E6%B4%BE3%E7%AD%89Ubuntu%E8%AE%BE%E5%A4%87%E6%B7%BB%E5%8A%A0%E9%AB%98%E9%80%9AGPU%E5%8A%A0%E9%80%9F/">给魔方派3等Ubuntu设备添加高通GPU加速</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-10-20T02:32:10.000Z">2025-10-20</time></p><p class="title"><a href="/2025/10/20/%E4%BA%BA%E7%94%9F%E7%9A%84%E6%84%8F%E4%B9%89%E6%98%AF%E4%BB%80%E4%B9%88/">人生的意义是什么</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-08-29T01:32:10.000Z">2025-08-29</time></p><p class="title"><a href="/2025/08/29/%E4%B8%B0%E7%94%B0%E8%88%AA%E7%9B%9B%E8%BD%A6%E6%9C%BA%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/">丰田航盛车机折腾记录</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-07-27T03:19:48.000Z">2025-07-27</time></p><p class="title"><a href="/2025/07/27/%E5%9C%A8%E5%B0%8F%E7%B1%B3%E5%B9%B3%E6%9D%BF5%E4%B8%8A%E8%BF%90%E8%A1%8Copenpilot/">在小米平板5上运行openpilot</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-04-14T08:31:55.000Z">2024-04-14</time></p><p class="title"><a href="/2024/04/14/%E5%A6%82%E4%BD%95%E5%9C%A8rk3588%E4%B8%8A%E8%BF%90%E8%A1%8Copenpilot-1/">如何在rk3588上运行openpilot[1]</a></p></div></article></div></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label">广告</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-8361678566464255" data-ad-slot="7814234312" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2025/10/"><span class="level-start"><span class="level-item">十月 2025</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/08/"><span class="level-start"><span class="level-item">八月 2025</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/07/"><span class="level-start"><span class="level-item">七月 2025</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/04/"><span class="level-start"><span class="level-item">四月 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/10/"><span class="level-start"><span class="level-item">十月 2023</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/12/"><span class="level-start"><span class="level-item">十二月 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/03/"><span class="level-start"><span class="level-item">三月 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/01/"><span class="level-start"><span class="level-item">一月 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/05/"><span class="level-start"><span class="level-item">五月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/04/"><span class="level-start"><span class="level-item">四月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/11/"><span class="level-start"><span class="level-item">十一月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/08/"><span class="level-start"><span class="level-item">八月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/06/"><span class="level-start"><span class="level-item">六月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">十二月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/10/"><span class="level-start"><span class="level-item">十月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/06/"><span class="level-start"><span class="level-item">六月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/05/"><span class="level-start"><span class="level-item">五月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/04/"><span class="level-start"><span class="level-item">四月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/12/"><span class="level-start"><span class="level-item">十二月 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/09/"><span class="level-start"><span class="level-item">九月 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/08/"><span class="level-start"><span class="level-item">八月 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/07/"><span class="level-start"><span class="level-item">七月 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/06/"><span class="level-start"><span class="level-item">六月 2018</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/05/"><span class="level-start"><span class="level-item">五月 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/03/"><span class="level-start"><span class="level-item">三月 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/01/"><span class="level-start"><span class="level-item">一月 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/12/"><span class="level-start"><span class="level-item">十二月 2017</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/08/"><span class="level-start"><span class="level-item">八月 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/06/"><span class="level-start"><span class="level-item">六月 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/05/"><span class="level-start"><span class="level-item">五月 2017</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/9t/"><span class="tag">9t</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Java/"><span class="tag">Java</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Terminating/"><span class="tag">Terminating</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Tomcat/"><span class="tag">Tomcat</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/android/"><span class="tag">android</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/apt/"><span class="tag">apt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cas/"><span class="tag">cas</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/coinhive/"><span class="tag">coinhive</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/crt/"><span class="tag">crt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/davinci/"><span class="tag">davinci</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/debian/"><span class="tag">debian</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker/"><span class="tag">docker</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/drbd/"><span class="tag">drbd</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/frp/"><span class="tag">frp</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/gitlab/"><span class="tag">gitlab</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hadk/"><span class="tag">hadk</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/https/"><span class="tag">https</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/httpservletrequest/"><span class="tag">httpservletrequest</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hybris-15-1/"><span class="tag">hybris-15.1</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hybris-16-0/"><span class="tag">hybris-16.0</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ios/"><span class="tag">ios</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ip/"><span class="tag">ip</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/iphone/"><span class="tag">iphone</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/irc/"><span class="tag">irc</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java/"><span class="tag">java</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jolla/"><span class="tag">jolla</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/js/"><span class="tag">js</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/json/"><span class="tag">json</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/k20/"><span class="tag">k20</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/k8s/"><span class="tag">k8s</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kubernetes/"><span class="tag">kubernetes</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/lineage-15-1/"><span class="tag">lineage-15.1</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/lineage-16-0/"><span class="tag">lineage-16.0</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linux/"><span class="tag">linux</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/lua/"><span class="tag">lua</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/migrate/"><span class="tag">migrate</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nginx/"><span class="tag">nginx</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/okcaros/"><span class="tag">okcaros</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/openpilot/"><span class="tag">openpilot</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/openresty/"><span class="tag">openresty</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/opensips/"><span class="tag">opensips</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pastebin/"><span class="tag">pastebin</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python/"><span class="tag">python</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python2/"><span class="tag">python2</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/rdp/"><span class="tag">rdp</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/redmi/"><span class="tag">redmi</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/redmi5plus/"><span class="tag">redmi5plus</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/remix/"><span class="tag">remix</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/rk3588/"><span class="tag">rk3588</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/rubikpi/"><span class="tag">rubikpi</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sailfish/"><span class="tag">sailfish</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sailfishos/"><span class="tag">sailfishos</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/signal/"><span class="tag">signal</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sip/"><span class="tag">sip</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/socks5/"><span class="tag">socks5</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/subprocess/"><span class="tag">subprocess</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tomcat/"><span class="tag">tomcat</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/trustcacerts/"><span class="tag">trustcacerts</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ubuntu/"><span class="tag">ubuntu</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/unix/"><span class="tag">unix</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vince/"><span class="tag">vince</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vmvare/"><span class="tag">vmvare</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/voip/"><span class="tag">voip</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/windows/"><span class="tag">windows</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/x86/"><span class="tag">x86</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/xiaomi/"><span class="tag">xiaomi</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/yavijava/"><span class="tag">yavijava</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BA%BA%E7%94%9F/"><span class="tag">人生</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8F%82%E6%95%B0/"><span class="tag">参数</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%94%B9%E5%86%99/"><span class="tag">改写</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%B7%B3%E8%BF%87/"><span class="tag">跳过</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%BD%A6%E6%9C%BA/"><span class="tag">车机</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%BF%81%E7%A7%BB/"><span class="tag">迁移</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%9A%8F%E7%AC%94/"><span class="tag">随笔</span><span class="tag">2</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/images/avatar.jpg" alt="BirdZhang&#039;s Blog" height="28"></a><p class="is-size-7"><span>&copy; 2025 BirdZhang</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>